"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/InteractiveMap.tsx":
/*!***************************************!*\
  !*** ./components/InteractiveMap.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/LanguageContext */ \"(app-pages-browser)/./lib/LanguageContext.tsx\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// components/InteractiveMap.tsx\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nconst InteractiveMap = (param)=>{\n    let { businesses, onBusinessClick, mapStyle: propMapStyle } = param;\n    _s();\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [map, setMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const tileLayerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { language } = (0,_lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__.useLanguage)();\n    const [mapStyle, setMapStyle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(propMapStyle || \"streets\"); // متغير للـ style\n    console.log(\"InteractiveMap: to:\", businesses);\n    // Debug log for language changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"InteractiveMap: Language changed to:\", language);\n    }, [\n        language\n    ]);\n    // Update map style when prop changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (propMapStyle && propMapStyle !== mapStyle) {\n            console.log(\"InteractiveMap: Map style changed to:\", propMapStyle);\n            setMapStyle(propMapStyle);\n        }\n    }, [\n        propMapStyle,\n        mapStyle\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setIsClient(true);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isClient || !mapRef.current || map) return;\n        let isMounted = true;\n        let mapInstance = null;\n        let controller = new AbortController();\n        // Dynamic import لـ Leaflet\n        const initMap = async ()=>{\n            try {\n                const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n                // Load MapTiler Leaflet SDK to augment L with maptilerLayer (for vector multilingual tiles)\n                await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                if (!isMounted || !mapRef.current || controller.signal.aborted) return;\n                // إصلاح مشكلة الـ default markers\n                delete L.Icon.Default.prototype._getIconUrl;\n                L.Icon.Default.mergeOptions({\n                    iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n                    iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n                    shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n                });\n                // Initialize map - نبدأ بمنطقة السعودية\n                mapInstance = L.map(mapRef.current).setView([\n                    23.8859,\n                    45.0792\n                ], 6);\n                if (!isMounted || controller.signal.aborted) {\n                    mapInstance.remove();\n                    return;\n                }\n                // Force low z-index for all map panes so it never overlaps other UI\n                const panes = mapInstance.getPanes();\n                if (panes === null || panes === void 0 ? void 0 : panes.mapPane) panes.mapPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.tilePane) panes.tilePane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.overlayPane) panes.overlayPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.shadowPane) panes.shadowPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.markerPane) panes.markerPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.popupPane) panes.popupPane.style.zIndex = \"0\";\n                if (panes && panes.tooltipPane) panes.tooltipPane.style.zIndex = \"1\";\n                const controlContainer = mapInstance.getContainer().querySelector(\".leaflet-control-container\");\n                if (controlContainer) controlContainer.style.zIndex = \"0\";\n                // Choose tile source. Prefer MapTiler SDK for language switching; fallback to OSM.\n                const mapTilerKey = process.env.NEXT_PUBLIC_MAPTILER_KEY;\n                console.log(\"Initial MapTiler Key exists:\", !!mapTilerKey);\n                console.log(\"Initial MapTiler Key length:\", (mapTilerKey === null || mapTilerKey === void 0 ? void 0 : mapTilerKey.length) || 0);\n                console.log(\"Initial language:\", language);\n                if (mapTilerKey) {\n                    const { MaptilerLayer } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                    const initialLanguage = language === \"ar\" ? \"ar\" : \"en\";\n                    console.log(\"Initial MapTiler language:\", initialLanguage);\n                    const layer = new MaptilerLayer({\n                        apiKey: mapTilerKey,\n                        style: mapStyle,\n                        language: initialLanguage\n                    });\n                    tileLayerRef.current = layer;\n                    if (isMounted) {\n                        layer.addTo(mapInstance);\n                    }\n                } else {\n                    const tileUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n                    tileLayerRef.current = L.tileLayer(tileUrl, {\n                        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n                        maxZoom: 18,\n                        minZoom: 3\n                    }).addTo(mapInstance);\n                }\n                // Add custom control to reset to Saudi Arabia\n                const ResetControl = L.Control.extend({\n                    onAdd: function() {\n                        const div = L.DomUtil.create(\"div\", \"reset-control\");\n                        div.innerHTML = \"\\n        <button style=\\\"\\n          background: white;\\n          border: 2px solid #3B82F6;\\n          border-radius: 5px;\\n          padding: 8px 16px;\\n          cursor: pointer;\\n          font-weight: bold;\\n          color: #3B82F6;\\n          box-shadow: 0 2px 8px rgba(0,0,0,0.2);\\n          transition: all 0.2s;\\n        \\\"\\n        onmouseover=\\\"this.style.background='#f0f9ff'; this.style.transform='scale(1.05)'\\\"\\n        onmouseout=\\\"this.style.background='white'; this.style.transform='scale(1)'\\\"\\n        title=\\\"Back to Saudi Arabia\\\">\\n          \\uD83C\\uDDF8\\uD83C\\uDDE6\\n        </button>\\n      \";\n                        div.onclick = ()=>{\n                            mapInstance.setView([\n                                23.8859,\n                                45.0792\n                            ], 6);\n                        };\n                        return div;\n                    },\n                    options: {\n                        position: \"topright\"\n                    }\n                });\n                const resetControl = new ResetControl();\n                resetControl.addTo(mapInstance);\n                if (isMounted) {\n                    setMap(mapInstance);\n                }\n            } catch (error) {\n                console.error(\"Error initializing map:\", error);\n            }\n        };\n        initMap();\n        return ()=>{\n            isMounted = false;\n            controller.abort();\n            if (mapInstance) {\n                try {\n                    mapInstance.remove();\n                } catch (error) {\n                    console.error(\"Error removing map:\", error);\n                }\n            }\n        };\n    }, [\n        isClient\n    ]);\n    // Update base tiles when language changes (for MapTiler). If no key, OSM remains unchanged.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map || !isClient) return;\n        let isMounted = true;\n        let controller = new AbortController();\n        const updateTiles = async ()=>{\n            try {\n                const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n                await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                const mapTilerKey = process.env.NEXT_PUBLIC_MAPTILER_KEY;\n                if (!isMounted || !map || controller.signal.aborted) return;\n                // Debug log for production\n                console.log(\"MapTiler Key exists:\", !!mapTilerKey);\n                console.log(\"MapTiler Key length:\", (mapTilerKey === null || mapTilerKey === void 0 ? void 0 : mapTilerKey.length) || 0);\n                console.log(\"Current language:\", language);\n                console.log(\"Language type:\", typeof language);\n                if (!mapTilerKey) {\n                    console.log(\"No MapTiler key, using OSM tiles\");\n                    return; // OSM doesn't support language switching\n                }\n                // Safely remove old layer\n                if (tileLayerRef.current && map && !controller.signal.aborted) {\n                    try {\n                        map.removeLayer(tileLayerRef.current);\n                        tileLayerRef.current = null;\n                        // Small delay to ensure layer is fully removed before adding new one\n                        await new Promise((resolve)=>setTimeout(resolve, 50));\n                    } catch (error) {\n                        console.error(\"Error removing tile layer:\", error);\n                    }\n                }\n                if (!isMounted || !map || controller.signal.aborted) return;\n                const { MaptilerLayer } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                const targetLanguage = language === \"ar\" ? \"ar\" : \"en\";\n                console.log(\"Setting MapTiler language to:\", targetLanguage);\n                const layer = new MaptilerLayer({\n                    apiKey: mapTilerKey,\n                    style: mapStyle,\n                    language: targetLanguage\n                });\n                if (isMounted && map && !controller.signal.aborted) {\n                    tileLayerRef.current = layer;\n                    layer.addTo(map);\n                }\n            } catch (error) {\n                if (error instanceof Error && error.name === \"AbortError\") {\n                    console.log(\"Tile update was cancelled\");\n                } else {\n                    console.error(\"Error updating tiles:\", error);\n                }\n            }\n        };\n        // Debounce tile updates to prevent rapid changes\n        const timer = setTimeout(()=>{\n            updateTiles();\n        }, 300);\n        return ()=>{\n            isMounted = false;\n            controller.abort();\n            clearTimeout(timer);\n        };\n    }, [\n        language,\n        map,\n        isClient,\n        mapStyle\n    ]);\n    // Update markers when businesses change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map || !isClient) return;\n        const updateMarkers = async ()=>{\n            const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n            // Remove existing markers\n            markers.forEach((marker)=>marker.removeFrom(map));\n            const newMarkers = [];\n            businesses.forEach((business)=>{\n                const markerColor = getBusinessMarkerColor(business.type);\n                // Create custom marker\n                const customIcon = L.divIcon({\n                    className: \"custom-marker\",\n                    html: '\\n            <div style=\"\\n              background-color: '.concat(markerColor, ';\\n              width: 20px;\\n              height: 20px;\\n              border-radius: 50%;\\n              border: 3px solid white;\\n              box-shadow: none;\\n              cursor: pointer;\\n            \"></div>\\n          '),\n                    iconSize: [\n                        20,\n                        20\n                    ],\n                    iconAnchor: [\n                        10,\n                        10\n                    ]\n                });\n                const marker = L.marker([\n                    business.lat,\n                    business.lng\n                ], {\n                    icon: customIcon,\n                    title: business.name\n                }).addTo(map);\n                // Build hover tooltip content with translations\n                const isRtl = language === \"ar\";\n                // Translations object\n                const translations = {\n                    en: {\n                        businessType: \"Business Type\",\n                        address: \"Address\",\n                        phone: \"Phone\",\n                        email: \"Email\",\n                        category: \"Category\",\n                        status: \"Status\",\n                        verified: \"Verified\",\n                        pending: \"Pending\",\n                        rating: \"Rating\",\n                        reviews: \"Reviews\",\n                        established: \"Established\",\n                        employees: \"Employees\",\n                        workingHours: \"Working Hours\",\n                        website: \"Website\",\n                        description: \"Description\"\n                    },\n                    ar: {\n                        businessType: \"نوع النشاط\",\n                        address: \"العنوان\",\n                        phone: \"الهاتف\",\n                        email: \"البريد الإلكتروني\",\n                        category: \"الفئة\",\n                        status: \"الحالة\",\n                        verified: \"موثق\",\n                        pending: \"في الانتظار\",\n                        rating: \"التقييم\",\n                        reviews: \"المراجعات\",\n                        established: \"تأسس في\",\n                        employees: \"الموظفين\",\n                        workingHours: \"ساعات العمل\",\n                        website: \"الموقع الإلكتروني\",\n                        description: \"الوصف\"\n                    }\n                };\n                const t = translations[language] || translations.en;\n                // Helper function to get translation or fallback\n                const getTranslation = (key, fallback)=>{\n                    return t[key] || fallback;\n                };\n                // Use actual business data with fallbacks\n                const businessData = {\n                    phone: business.phone || getTranslation(\"notAvailable\", \"N/A\"),\n                    email: business.contactEmail || getTranslation(\"notAvailable\", \"N/A\"),\n                    rating: business.rating || 0,\n                    reviews: business.reviewsCount || 0,\n                    workingHours: getTranslation(\"notAvailable\", \"N/A\"),\n                    status: business.status || \"pending\",\n                    description: business.description || \"\"\n                };\n                const tooltipContent = '\\n          <div dir=\"'.concat(isRtl ? \"rtl\" : \"ltr\", '\" style=\"background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;min-width:400px;max-width:500px;box-shadow:0 8px 20px rgba(0,0,0,0.12);').concat(isRtl ? \"direction:rtl;text-align:right;\" : \"\", '\">\\n            <!-- Header Row -->\\n            <div style=\"display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n              <h3 style=\"font-weight:700;color:#111827;font-size:14px;margin:0;\">').concat(business.name, '</h3>\\n              <span style=\"padding:3px 6px;border-radius:12px;background:').concat(businessData.status === \"verified\" ? \"#10B981\" : \"#F59E0B\", ';color:#fff;font-size:9px;font-weight:600;\">\\n                ').concat(businessData.status === \"verified\" ? t.verified : t.pending, '\\n              </span>\\n            </div>\\n\\n            <!-- Main Content Row -->\\n            <div style=\"display:flex;gap:12px;align-items:flex-start;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n              <!-- Left Column -->\\n              <div style=\"flex:1;min-width:0;\">\\n                <!-- Business Type & Category -->\\n                <div style=\"display:flex;flex-wrap:wrap;gap:6px;margin-bottom:6px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  <span style=\"padding:3px 6px;border-radius:8px;background:#3B82F6;color:#fff;font-size:9px;font-weight:600;\">\\n                    ').concat(business.type, \"\\n                  </span>\\n                  \").concat((business.categories || [\n                    business.category\n                ]).map((category)=>'\\n                    <span style=\"padding:3px 6px;border-radius:8px;background:#6B7280;color:#fff;font-size:9px;font-weight:600;\">\\n                      '.concat(category, \"\\n                    </span>\\n                  \")).join(\"\"), '\\n                </div>\\n\\n                <!-- Address -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.address, '</div>\\n                  <div style=\"color:#374151;font-size:10px;line-height:1.2;\">').concat(business.address, '</div>\\n                </div>\\n\\n                <!-- Contact Info -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.phone, '</div>\\n                  <div style=\"color:#374151;font-size:9px;\">').concat(businessData.phone, '</div>\\n                </div>\\n              </div>\\n\\n              <!-- Right Column -->\\n              <div style=\"flex:1;min-width:0;\">\\n                <!-- Rating -->\\n                <div style=\"display:flex;align-items:center;gap:4px;margin-bottom:6px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  <span style=\"color:#F59E0B;font-size:10px;\">⭐</span>\\n                  <span style=\"color:#374151;font-size:10px;font-weight:600;\">').concat(businessData.rating, '</span>\\n                  <span style=\"color:#6B7280;font-size:8px;\">(').concat(businessData.reviews, ')</span>\\n                </div>\\n\\n                <!-- Email -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.email, '</div>\\n                  <div style=\"color:#374151;font-size:9px;\">').concat(businessData.email, '</div>\\n                </div>\\n\\n                <!-- Additional Info -->\\n                <div style=\"display:flex;gap:8px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n\\n            <!-- Rating and Reviews -->\\n            <div style=\"margin-top:6px;padding-top:6px;border-top:1px solid #f3f4f6;display:flex;justify-content:space-between;\">\\n              <div>\\n                <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:2px;\">\\n                  ').concat(t.rating || \"Rating\", '\\n                </div>\\n                <div style=\"color:#374151;font-size:10px;display:flex;align-items:center;gap:2px;\">\\n                  <span>').concat(businessData.rating, '</span>\\n                  <i class=\"ri-star-fill\" style=\"color:#F59E0B;font-size:12px;\"></i>\\n                  <span style=\"margin-left:4px;color:#6B7280;font-size:9px;\">(').concat(businessData.reviews, ')</span>\\n                </div>\\n              </div>\\n              <div>\\n                <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:2px;\">\\n                  ').concat(t.status || \"Status\", '\\n                </div>\\n                <div style=\"color:#374151;font-size:10px;display:flex;align-items:center;gap:2px;\">\\n                  <span style=\"display:inline-block;width:8px;height:8px;border-radius:50%;background-color:').concat(businessData.status === \"active\" ? \"#10B981\" : \"#F59E0B\", ';\"></span>\\n                  <span>').concat(businessData.status === \"active\" ? t.verified || \"Verified\" : t.pending || \"Pending\", \"</span>\\n                </div>\\n              </div>\\n            </div>\\n          </div>\\n        \");\n                marker.bindTooltip(tooltipContent, {\n                    direction: \"top\",\n                    offset: [\n                        0,\n                        -10\n                    ],\n                    opacity: 1,\n                    permanent: false,\n                    sticky: true,\n                    interactive: true,\n                    className: \"leaflet-business-tooltip\"\n                });\n                // No button handlers needed since we removed the buttons\n                // متغ��رات للتحكم في فتح وإغلاق الـ tooltip\n                let isTooltipOpen = false;\n                let closeTimeout;\n                let isHoveringTooltip = false;\n                let isHoveringMarker = false;\n                // Handle tooltip events\n                marker.on(\"tooltipopen\", (e)=>{\n                    isTooltipOpen = true;\n                    const tooltip = e.tooltip;\n                    const tooltipElement = tooltip.getElement();\n                    if (tooltipElement) {\n                        // No button event listeners needed since we removed the buttons\n                        // منع إغلاق الـ tooltip عند hover عليه\n                        tooltipElement.addEventListener(\"mouseenter\", ()=>{\n                            isHoveringTooltip = true;\n                            clearTimeout(closeTimeout);\n                        });\n                        tooltipElement.addEventListener(\"mouseleave\", ()=>{\n                            isHoveringTooltip = false;\n                            // إغلاق الـ tooltip بعد مغادرة الماوس بفترة قصيرة فقط إذا لم نكن نhover على الـ marker\n                            closeTimeout = setTimeout(()=>{\n                                if (!isHoveringTooltip && !isHoveringMarker && isTooltipOpen) {\n                                    marker.closeTooltip();\n                                    isTooltipOpen = false;\n                                }\n                            }, 100);\n                        });\n                    }\n                });\n                marker.on(\"tooltipclose\", ()=>{\n                    isTooltipOpen = false;\n                    isHoveringTooltip = false;\n                    clearTimeout(closeTimeout);\n                });\n                // Hover behavior - منطق محسن لمنع الـ flickering\n                marker.on(\"mouseover\", ()=>{\n                    isHoveringMarker = true;\n                    clearTimeout(closeTimeout);\n                    if (!isTooltipOpen) {\n                        marker.openTooltip();\n                        onBusinessClick(business);\n                    }\n                });\n                marker.on(\"mouseout\", ()=>{\n                    isHoveringMarker = false;\n                    // إغلاق الـ tooltip بعد مغادرة الماوس بفترة قصيرة فقط إذا لم نكن نhover على الـ tooltip\n                    closeTimeout = setTimeout(()=>{\n                        if (!isHoveringTooltip && !isHoveringMarker && isTooltipOpen) {\n                            marker.closeTooltip();\n                            isTooltipOpen = false;\n                        }\n                    }, 100);\n                });\n                // Also handle click on marker\n                marker.on(\"click\", ()=>{\n                    onBusinessClick(business);\n                });\n                newMarkers.push(marker);\n            });\n            setMarkers(newMarkers);\n            // Fit map to show all markers if there are any\n            if (businesses.length > 0) {\n                const group = L.featureGroup(newMarkers);\n                map.fitBounds(group.getBounds(), {\n                    padding: [\n                        20,\n                        20\n                    ]\n                });\n            }\n        };\n        updateMarkers();\n    }, [\n        map,\n        isClient,\n        businesses,\n        onBusinessClick,\n        language\n    ]);\n    const getBusinessMarkerColor = (type)=>{\n        const colors = {\n            Electronics: \"#3B82F6\",\n            Automotive: \"#EF4444\",\n            Agriculture: \"#10B981\",\n            Industrial: \"#F59E0B\",\n            Construction: \"#EAB308\",\n            Fashion: \"#EC4899\",\n            Medical: \"#14B8A6\",\n            Food: \"#F97316\",\n            Technology: \"#8B5CF6\",\n            \"Oil&Gas\": \"#000000\",\n            Marine: \"#1D4ED8\",\n            Mining: \"#78716C\",\n            Tourism: \"#F43F5E\",\n            Textiles: \"#D946EF\",\n            Equipment: \"#475569\",\n            Military: \"#166534\",\n            Logistics: \"#1E40AF\",\n            Port: \"#1E3A8A\",\n            Fishing: \"#60A5FA\",\n            Perfumes: \"#7C3AED\",\n            Petrochemical: \"#374151\"\n        };\n        return colors[type] || \"#6B7280\";\n    };\n    if (!isClient) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-gray-100 rounded-2xl h-64 sm:h-80 md:h-[28rem] flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                        className: \"ri-map-pin-line text-3xl text-yellow-500 mb-2 animate-pulse\"\n                    }, void 0, false, {\n                        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                        lineNumber: 627,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: \"Loading map...\"\n                    }, void 0, false, {\n                        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                        lineNumber: 628,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                lineNumber: 626,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n            lineNumber: 625,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-gray-100 rounded-2xl overflow-hidden shadow-xl h-64 sm:h-80 md:h-[28rem] relative z-0\",\n        style: {\n            zIndex: 0\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            ref: mapRef,\n            className: \"w-full h-full rounded-2xl z-0\",\n            style: {\n                zIndex: 0\n            }\n        }, void 0, false, {\n            fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n            lineNumber: 639,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n        lineNumber: 635,\n        columnNumber: 5\n    }, undefined);\n};\n_s(InteractiveMap, \"7XcAYp1cOCziRvvg5rd+AzkEDF8=\", false, function() {\n    return [\n        _lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__.useLanguage\n    ];\n});\n_c = InteractiveMap;\n/* harmony default export */ __webpack_exports__[\"default\"] = (InteractiveMap);\nvar _c;\n$RefreshReg$(_c, \"InteractiveMap\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW50ZXJhY3RpdmVNYXAudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdDQUFnQzs7O0FBR29CO0FBQ0E7QUE4QnBELE1BQU1JLGlCQUFpQjtRQUFDLEVBQ3RCQyxVQUFVLEVBQ1ZDLGVBQWUsRUFDZkMsVUFBVUMsWUFBWSxFQUNiOztJQUNULE1BQU1DLFNBQVNSLDZDQUFNQSxDQUFpQjtJQUN0QyxNQUFNLENBQUNTLEtBQUtDLE9BQU8sR0FBR1QsK0NBQVFBLENBQU07SUFDcEMsTUFBTSxDQUFDVSxTQUFTQyxXQUFXLEdBQUdYLCtDQUFRQSxDQUFRLEVBQUU7SUFDaEQsTUFBTSxDQUFDWSxVQUFVQyxZQUFZLEdBQUdiLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU1jLGVBQWVmLDZDQUFNQSxDQUFNO0lBQ2pDLE1BQU0sRUFBRWdCLFFBQVEsRUFBRSxHQUFHZCxpRUFBV0E7SUFDaEMsTUFBTSxDQUFDSSxVQUFVVyxZQUFZLEdBQUdoQiwrQ0FBUUEsQ0FBQ00sZ0JBQWdCLFlBQVksa0JBQWtCO0lBQ3JGVyxRQUFRQyxHQUFHLENBQUMsdUJBQXVCZjtJQUNyQyxpQ0FBaUM7SUFDakNMLGdEQUFTQSxDQUFDO1FBQ1JtQixRQUFRQyxHQUFHLENBQUMsd0NBQXdDSDtJQUN0RCxHQUFHO1FBQUNBO0tBQVM7SUFFYixxQ0FBcUM7SUFDckNqQixnREFBU0EsQ0FBQztRQUNSLElBQUlRLGdCQUFnQkEsaUJBQWlCRCxVQUFVO1lBQzdDWSxRQUFRQyxHQUFHLENBQUMseUNBQXlDWjtZQUNyRFUsWUFBWVY7UUFDZDtJQUNGLEdBQUc7UUFBQ0E7UUFBY0Q7S0FBUztJQUUzQlAsZ0RBQVNBLENBQUM7UUFDUmUsWUFBWTtJQUNkLEdBQUcsRUFBRTtJQUVMZixnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQ2MsWUFBWSxDQUFDTCxPQUFPWSxPQUFPLElBQUlYLEtBQUs7UUFFekMsSUFBSVksWUFBWTtRQUNoQixJQUFJQyxjQUFt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QVk7WUFDWkMsYUFBYTtZQUNiQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsU0FBUztZQUNUQyxTQUFTO1lBQ1RDLE1BQU07WUFDTkMsWUFBWTtZQUNaLFdBQVc7WUFDWEMsUUFBUTtZQUNSQyxRQUFRO1lBQ1JDLFNBQVM7WUFDVEMsVUFBVTtZQUNWQyxXQUFXO1lBQ1hDLFVBQVU7WUFDVkMsV0FBVztZQUNYQyxNQUFNO1lBQ05DLFNBQVM7WUFDVEMsVUFBVTtZQUNWQyxlQUFlO1FBQ2pCO1FBQ0EsT0FBT3BCLE1BQU0sQ0FBQ2pFLEtBQUssSUFBSTtJQUN6QjtJQUVBLElBQUksQ0FBQ3ZGLFVBQVU7UUFDYixxQkFDRSw4REFBQzJEO1lBQUkrQixXQUFVO3NCQUNiLDRFQUFDL0I7Z0JBQUkrQixXQUFVOztrQ0FDYiw4REFBQ21GO3dCQUFFbkYsV0FBVTs7Ozs7O2tDQUNiLDhEQUFDb0Y7d0JBQUVwRixXQUFVO2tDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJckM7SUFFQSxxQkFDRSw4REFBQy9CO1FBQ0MrQixXQUFVO1FBQ1Y3RCxPQUFPO1lBQUVDLFFBQVE7UUFBRTtrQkFFbkIsNEVBQUM2QjtZQUNDb0gsS0FBS3BMO1lBQ0wrRixXQUFVO1lBQ1Y3RCxPQUFPO2dCQUFFQyxRQUFRO1lBQUU7Ozs7Ozs7Ozs7O0FBSTNCO0dBbm1CTXhDOztRQVVpQkQsNkRBQVdBOzs7S0FWNUJDO0FBcW1CTiwrREFBZUEsY0FBY0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9jb21wb25lbnRzL0ludGVyYWN0aXZlTWFwLnRzeD81YTVmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGNvbXBvbmVudHMvSW50ZXJhY3RpdmVNYXAudHN4XG5cInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VMYW5ndWFnZSB9IGZyb20gXCJAL2xpYi9MYW5ndWFnZUNvbnRleHRcIjtcblxuLy8gRGVmaW5lIHR5cGVzXG5pbnRlcmZhY2UgQnVzaW5lc3Mge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGFkZHJlc3M6IHN0cmluZztcbiAgbGF0OiBudW1iZXI7XG4gIGxuZzogbnVtYmVyO1xuICB0eXBlOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiBzdHJpbmc7XG4gIGNhdGVnb3JpZXM/OiBzdHJpbmdbXTsgLy8gQXJyYXkgb2YgY2F0ZWdvcmllc1xuICBidXNpbmVzc1R5cGU/OiBzdHJpbmc7XG4gIHByb2ZpbGVJbWFnZT86IHN0cmluZztcbiAgc2VydmljZURpc3RhbmNlPzogbnVtYmVyO1xuICByYXRpbmc/OiBudW1iZXI7XG4gIHJldmlld3NDb3VudD86IG51bWJlcjtcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBwaG9uZT86IHN0cmluZztcbiAgY29udGFjdEVtYWlsPzogc3RyaW5nO1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIE1hcFByb3BzIHtcbiAgYnVzaW5lc3NlczogQnVzaW5lc3NbXTtcbiAgb25CdXNpbmVzc0NsaWNrOiAoYnVzaW5lc3M6IEJ1c2luZXNzKSA9PiB2b2lkO1xuICBtYXBTdHlsZT86IHN0cmluZzsgLy8g2KXYttin2YHYqSBwcm9wINmE2YTZgCBzdHlsZVxufVxuXG5cbmNvbnN0IEludGVyYWN0aXZlTWFwID0gKHtcbiAgYnVzaW5lc3NlcyxcbiAgb25CdXNpbmVzc0NsaWNrLFxuICBtYXBTdHlsZTogcHJvcE1hcFN0eWxlLFxufTogTWFwUHJvcHMpID0+IHtcbiAgY29uc3QgbWFwUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW21hcCwgc2V0TWFwXSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XG4gIGNvbnN0IFttYXJrZXJzLCBzZXRNYXJrZXJzXSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB0aWxlTGF5ZXJSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgY29uc3QgeyBsYW5ndWFnZSB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgW21hcFN0eWxlLCBzZXRNYXBTdHlsZV0gPSB1c2VTdGF0ZShwcm9wTWFwU3R5bGUgfHwgXCJzdHJlZXRzXCIpOyAvLyDZhdiq2LrZitixINmE2YTZgCBzdHlsZVxuICAgIGNvbnNvbGUubG9nKFwiSW50ZXJhY3RpdmVNYXA6IHRvOlwiLCBidXNpbmVzc2VzKTtcbiAgLy8gRGVidWcgbG9nIGZvciBsYW5ndWFnZSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJJbnRlcmFjdGl2ZU1hcDogTGFuZ3VhZ2UgY2hhbmdlZCB0bzpcIiwgbGFuZ3VhZ2UpO1xuICB9LCBbbGFuZ3VhZ2VdKTtcblxuICAvLyBVcGRhdGUgbWFwIHN0eWxlIHdoZW4gcHJvcCBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByb3BNYXBTdHlsZSAmJiBwcm9wTWFwU3R5bGUgIT09IG1hcFN0eWxlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkludGVyYWN0aXZlTWFwOiBNYXAgc3R5bGUgY2hhbmdlZCB0bzpcIiwgcHJvcE1hcFN0eWxlKTtcbiAgICAgIHNldE1hcFN0eWxlKHByb3BNYXBTdHlsZSk7XG4gICAgfVxuICB9LCBbcHJvcE1hcFN0eWxlLCBtYXBTdHlsZV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0SXNDbGllbnQodHJ1ZSk7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNDbGllbnQgfHwgIW1hcFJlZi5jdXJyZW50IHx8IG1hcCkgcmV0dXJuO1xuXG4gICAgbGV0IGlzTW91bnRlZCA9IHRydWU7XG4gICAgbGV0IG1hcEluc3RhbmNlOiBhbnkgPSBudWxsO1xuICAgIGxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgLy8gRHluYW1pYyBpbXBvcnQg2YTZgCBMZWFmbGV0XG4gICAgY29uc3QgaW5pdE1hcCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IEwgPSBhd2FpdCBpbXBvcnQoXCJsZWFmbGV0XCIpO1xuICAgICAgICAvLyBMb2FkIE1hcFRpbGVyIExlYWZsZXQgU0RLIHRvIGF1Z21lbnQgTCB3aXRoIG1hcHRpbGVyTGF5ZXIgKGZvciB2ZWN0b3IgbXVsdGlsaW5ndWFsIHRpbGVzKVxuICAgICAgICBhd2FpdCBpbXBvcnQoXCJAbWFwdGlsZXIvbGVhZmxldC1tYXB0aWxlcnNka1wiKTtcblxuICAgICAgICBpZiAoIWlzTW91bnRlZCB8fCAhbWFwUmVmLmN1cnJlbnQgfHwgY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vINil2LXZhNin2K0g2YXYtNmD2YTYqSDYp9mE2YAgZGVmYXVsdCBtYXJrZXJzXG4gICAgICAgIGRlbGV0ZSAoTC5JY29uLkRlZmF1bHQucHJvdG90eXBlIGFzIGFueSkuX2dldEljb25Vcmw7XG4gICAgICAgIEwuSWNvbi5EZWZhdWx0Lm1lcmdlT3B0aW9ucyh7XG4gICAgICAgICAgaWNvblJldGluYVVybDpcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8xLjcuMS9pbWFnZXMvbWFya2VyLWljb24tMngucG5nXCIsXG4gICAgICAgICAgaWNvblVybDpcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8xLjcuMS9pbWFnZXMvbWFya2VyLWljb24ucG5nXCIsXG4gICAgICAgICAgc2hhZG93VXJsOlxuICAgICAgICAgICAgXCJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9sZWFmbGV0LzEuNy4xL2ltYWdlcy9tYXJrZXItc2hhZG93LnBuZ1wiLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIG1hcCAtINmG2KjYr9ijINio2YXZhti32YLYqSDYp9mE2LPYudmI2K/ZitipXG4gICAgICAgIG1hcEluc3RhbmNlID0gTC5tYXAobWFwUmVmLmN1cnJlbnQhKS5zZXRWaWV3KFsyMy44ODU5LCA0NS4wNzkyXSwgNik7XG5cbiAgICAgICAgaWYgKCFpc01vdW50ZWQgfHwgY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZSgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvcmNlIGxvdyB6LWluZGV4IGZvciBhbGwgbWFwIHBhbmVzIHNvIGl0IG5ldmVyIG92ZXJsYXBzIG90aGVyIFVJXG4gICAgICAgIGNvbnN0IHBhbmVzID0gbWFwSW5zdGFuY2UuZ2V0UGFuZXMoKTtcbiAgICAgICAgaWYgKHBhbmVzPy5tYXBQYW5lKSBwYW5lcy5tYXBQYW5lLnN0eWxlLnpJbmRleCA9IFwiMFwiO1xuICAgICAgICBpZiAocGFuZXM/LnRpbGVQYW5lKSBwYW5lcy50aWxlUGFuZS5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgaWYgKHBhbmVzPy5vdmVybGF5UGFuZSkgcGFuZXMub3ZlcmxheVBhbmUuc3R5bGUuekluZGV4ID0gXCIwXCI7XG4gICAgICAgIGlmIChwYW5lcz8uc2hhZG93UGFuZSkgcGFuZXMuc2hhZG93UGFuZS5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgaWYgKHBhbmVzPy5tYXJrZXJQYW5lKSBwYW5lcy5tYXJrZXJQYW5lLnN0eWxlLnpJbmRleCA9IFwiMFwiO1xuICAgICAgICBpZiAocGFuZXM/LnBvcHVwUGFuZSkgcGFuZXMucG9wdXBQYW5lLnN0eWxlLnpJbmRleCA9IFwiMFwiO1xuICAgICAgICBpZiAoKHBhbmVzIGFzIGFueSkgJiYgKHBhbmVzIGFzIGFueSkudG9vbHRpcFBhbmUpXG4gICAgICAgICAgKHBhbmVzIGFzIGFueSkudG9vbHRpcFBhbmUuc3R5bGUuekluZGV4ID0gXCIxXCI7XG4gICAgICAgIGNvbnN0IGNvbnRyb2xDb250YWluZXIgPSBtYXBJbnN0YW5jZVxuICAgICAgICAgIC5nZXRDb250YWluZXIoKVxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmxlYWZsZXQtY29udHJvbC1jb250YWluZXJcIikgYXMgSFRNTEVsZW1lbnQgfCBudWxsO1xuICAgICAgICBpZiAoY29udHJvbENvbnRhaW5lcikgY29udHJvbENvbnRhaW5lci5zdHlsZS56SW5kZXggPSBcIjBcIjtcblxuICAgICAgICAvLyBDaG9vc2UgdGlsZSBzb3VyY2UuIFByZWZlciBNYXBUaWxlciBTREsgZm9yIGxhbmd1YWdlIHN3aXRjaGluZzsgZmFsbGJhY2sgdG8gT1NNLlxuICAgICAgICBjb25zdCBtYXBUaWxlcktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX01BUFRJTEVSX0tFWTtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsIE1hcFRpbGVyIEtleSBleGlzdHM6XCIsICEhbWFwVGlsZXJLZXkpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkluaXRpYWwgTWFwVGlsZXIgS2V5IGxlbmd0aDpcIiwgbWFwVGlsZXJLZXk/Lmxlbmd0aCB8fCAwKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsIGxhbmd1YWdlOlwiLCBsYW5ndWFnZSk7XG5cbiAgICAgICAgaWYgKG1hcFRpbGVyS2V5KSB7XG4gICAgICAgICAgY29uc3QgeyBNYXB0aWxlckxheWVyIH0gPSBhd2FpdCBpbXBvcnQoXG4gICAgICAgICAgICBcIkBtYXB0aWxlci9sZWFmbGV0LW1hcHRpbGVyc2RrXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIGNvbnN0IGluaXRpYWxMYW5ndWFnZSA9IGxhbmd1YWdlID09PSBcImFyXCIgPyBcImFyXCIgOiBcImVuXCI7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsIE1hcFRpbGVyIGxhbmd1YWdlOlwiLCBpbml0aWFsTGFuZ3VhZ2UpO1xuXG4gICAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTWFwdGlsZXJMYXllcih7XG4gICAgICAgICAgICBhcGlLZXk6IG1hcFRpbGVyS2V5LFxuICAgICAgICAgICAgc3R5bGU6IG1hcFN0eWxlLFxuICAgICAgICAgICAgbGFuZ3VhZ2U6IGluaXRpYWxMYW5ndWFnZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aWxlTGF5ZXJSZWYuY3VycmVudCA9IGxheWVyO1xuICAgICAgICAgIGlmIChpc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxheWVyLmFkZFRvKG1hcEluc3RhbmNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdGlsZVVybCA9IFwiaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmdcIjtcbiAgICAgICAgICB0aWxlTGF5ZXJSZWYuY3VycmVudCA9IEwudGlsZUxheWVyKHRpbGVVcmwsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uOlxuICAgICAgICAgICAgICAnJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMnLFxuICAgICAgICAgICAgbWF4Wm9vbTogMTgsXG4gICAgICAgICAgICBtaW5ab29tOiAzLCAvLyDZhtiz2YXYrSDYqNin2YTZgCB6b29tIG91dCDYo9mD2KvYsVxuICAgICAgICAgIH0pLmFkZFRvKG1hcEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgY3VzdG9tIGNvbnRyb2wgdG8gcmVzZXQgdG8gU2F1ZGkgQXJhYmlhXG4gICAgICAgIGNvbnN0IFJlc2V0Q29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoe1xuICAgICAgICAgIG9uQWRkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zdCBkaXYgPSBMLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsIFwicmVzZXQtY29udHJvbFwiKTtcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgXG4gICAgICAgIDxidXR0b24gc3R5bGU9XCJcbiAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjM0I4MkY2O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHggMTZweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgY29sb3I6ICMzQjgyRjY7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4yKTtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycztcbiAgICAgICAgXCJcbiAgICAgICAgb25tb3VzZW92ZXI9XCJ0aGlzLnN0eWxlLmJhY2tncm91bmQ9JyNmMGY5ZmYnOyB0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMS4wNSknXCJcbiAgICAgICAgb25tb3VzZW91dD1cInRoaXMuc3R5bGUuYmFja2dyb3VuZD0nd2hpdGUnOyB0aGlzLnN0eWxlLnRyYW5zZm9ybT0nc2NhbGUoMSknXCJcbiAgICAgICAgdGl0bGU9XCJCYWNrIHRvIFNhdWRpIEFyYWJpYVwiPlxuICAgICAgICAgIPCfh7jwn4emXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgYDtcbiAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBtYXBJbnN0YW5jZS5zZXRWaWV3KFsyMy44ODU5LCA0NS4wNzkyXSwgNik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGRpdjtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcHJpZ2h0XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc2V0Q29udHJvbCA9IG5ldyBSZXNldENvbnRyb2woKTtcbiAgICAgICAgcmVzZXRDb250cm9sLmFkZFRvKG1hcEluc3RhbmNlKTtcblxuICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgc2V0TWFwKG1hcEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluaXRpYWxpemluZyBtYXA6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaW5pdE1hcCgpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgaWYgKG1hcEluc3RhbmNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWFwSW5zdGFuY2UucmVtb3ZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlbW92aW5nIG1hcDpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2lzQ2xpZW50XSk7XG5cbiAgLy8gVXBkYXRlIGJhc2UgdGlsZXMgd2hlbiBsYW5ndWFnZSBjaGFuZ2VzIChmb3IgTWFwVGlsZXIpLiBJZiBubyBrZXksIE9TTSByZW1haW5zIHVuY2hhbmdlZC5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hcCB8fCAhaXNDbGllbnQpIHJldHVybjtcblxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xuICAgIGxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgY29uc3QgdXBkYXRlVGlsZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBMID0gYXdhaXQgaW1wb3J0KFwibGVhZmxldFwiKTtcbiAgICAgICAgYXdhaXQgaW1wb3J0KFwiQG1hcHRpbGVyL2xlYWZsZXQtbWFwdGlsZXJzZGtcIik7XG4gICAgICAgIGNvbnN0IG1hcFRpbGVyS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTUFQVElMRVJfS0VZO1xuXG4gICAgICAgIGlmICghaXNNb3VudGVkIHx8ICFtYXAgfHwgY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIERlYnVnIGxvZyBmb3IgcHJvZHVjdGlvblxuICAgICAgICBjb25zb2xlLmxvZyhcIk1hcFRpbGVyIEtleSBleGlzdHM6XCIsICEhbWFwVGlsZXJLZXkpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIk1hcFRpbGVyIEtleSBsZW5ndGg6XCIsIG1hcFRpbGVyS2V5Py5sZW5ndGggfHwgMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ3VycmVudCBsYW5ndWFnZTpcIiwgbGFuZ3VhZ2UpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkxhbmd1YWdlIHR5cGU6XCIsIHR5cGVvZiBsYW5ndWFnZSk7XG5cbiAgICAgICAgaWYgKCFtYXBUaWxlcktleSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gTWFwVGlsZXIga2V5LCB1c2luZyBPU00gdGlsZXNcIik7XG4gICAgICAgICAgcmV0dXJuOyAvLyBPU00gZG9lc24ndCBzdXBwb3J0IGxhbmd1YWdlIHN3aXRjaGluZ1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2FmZWx5IHJlbW92ZSBvbGQgbGF5ZXJcbiAgICAgICAgaWYgKHRpbGVMYXllclJlZi5jdXJyZW50ICYmIG1hcCAmJiAhY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBtYXAucmVtb3ZlTGF5ZXIodGlsZUxheWVyUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgdGlsZUxheWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgICAgLy8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIGxheWVyIGlzIGZ1bGx5IHJlbW92ZWQgYmVmb3JlIGFkZGluZyBuZXcgb25lXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MCkpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVtb3ZpbmcgdGlsZSBsYXllcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNNb3VudGVkIHx8ICFtYXAgfHwgY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHsgTWFwdGlsZXJMYXllciB9ID0gYXdhaXQgaW1wb3J0KFwiQG1hcHRpbGVyL2xlYWZsZXQtbWFwdGlsZXJzZGtcIik7XG4gICAgICAgIGNvbnN0IHRhcmdldExhbmd1YWdlID0gbGFuZ3VhZ2UgPT09IFwiYXJcIiA/IFwiYXJcIiA6IFwiZW5cIjtcbiAgICAgICAgY29uc29sZS5sb2coXCJTZXR0aW5nIE1hcFRpbGVyIGxhbmd1YWdlIHRvOlwiLCB0YXJnZXRMYW5ndWFnZSk7XG5cbiAgICAgICAgY29uc3QgbGF5ZXIgPSBuZXcgTWFwdGlsZXJMYXllcih7XG4gICAgICAgICAgYXBpS2V5OiBtYXBUaWxlcktleSxcbiAgICAgICAgICBzdHlsZTogbWFwU3R5bGUsXG4gICAgICAgICAgbGFuZ3VhZ2U6IHRhcmdldExhbmd1YWdlLFxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoaXNNb3VudGVkICYmIG1hcCAmJiAhY29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuICAgICAgICAgIHRpbGVMYXllclJlZi5jdXJyZW50ID0gbGF5ZXI7XG4gICAgICAgICAgbGF5ZXIuYWRkVG8obWFwKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlRpbGUgdXBkYXRlIHdhcyBjYW5jZWxsZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIHRpbGVzOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gRGVib3VuY2UgdGlsZSB1cGRhdGVzIHRvIHByZXZlbnQgcmFwaWQgY2hhbmdlc1xuICAgIGNvbnN0IHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB1cGRhdGVUaWxlcygpO1xuICAgIH0sIDMwMCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgIH07XG4gIH0sIFtsYW5ndWFnZSwgbWFwLCBpc0NsaWVudCwgbWFwU3R5bGVdKTtcblxuICAvLyBVcGRhdGUgbWFya2VycyB3aGVuIGJ1c2luZXNzZXMgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFtYXAgfHwgIWlzQ2xpZW50KSByZXR1cm47XG5cbiAgICBjb25zdCB1cGRhdGVNYXJrZXJzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgTCA9IGF3YWl0IGltcG9ydChcImxlYWZsZXRcIik7XG5cbiAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBtYXJrZXJzXG4gICAgICBtYXJrZXJzLmZvckVhY2goKG1hcmtlcikgPT4gbWFya2VyLnJlbW92ZUZyb20obWFwKSk7XG4gICAgICBjb25zdCBuZXdNYXJrZXJzOiBhbnlbXSA9IFtdO1xuXG4gICAgICBidXNpbmVzc2VzLmZvckVhY2goKGJ1c2luZXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hcmtlckNvbG9yID0gZ2V0QnVzaW5lc3NNYXJrZXJDb2xvcihidXNpbmVzcy50eXBlKTtcblxuICAgICAgICAvLyBDcmVhdGUgY3VzdG9tIG1hcmtlclxuICAgICAgICBjb25zdCBjdXN0b21JY29uID0gTC5kaXZJY29uKHtcbiAgICAgICAgICBjbGFzc05hbWU6IFwiY3VzdG9tLW1hcmtlclwiLFxuICAgICAgICAgIGh0bWw6IGBcbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJcbiAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHttYXJrZXJDb2xvcn07XG4gICAgICAgICAgICAgIHdpZHRoOiAyMHB4O1xuICAgICAgICAgICAgICBoZWlnaHQ6IDIwcHg7XG4gICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgICAgYm9yZGVyOiAzcHggc29saWQgd2hpdGU7XG4gICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIFwiPjwvZGl2PlxuICAgICAgICAgIGAsXG4gICAgICAgICAgaWNvblNpemU6IFsyMCwgMjBdLFxuICAgICAgICAgIGljb25BbmNob3I6IFsxMCwgMTBdLFxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbYnVzaW5lc3MubGF0LCBidXNpbmVzcy5sbmddLCB7XG4gICAgICAgICAgaWNvbjogY3VzdG9tSWNvbixcbiAgICAgICAgICB0aXRsZTogYnVzaW5lc3MubmFtZSxcbiAgICAgICAgfSkuYWRkVG8obWFwKTtcblxuICAgICAgICAvLyBCdWlsZCBob3ZlciB0b29sdGlwIGNvbnRlbnQgd2l0aCB0cmFuc2xhdGlvbnNcbiAgICAgICAgY29uc3QgaXNSdGwgPSBsYW5ndWFnZSA9PT0gXCJhclwiO1xuXG4gICAgICAgIC8vIFRyYW5zbGF0aW9ucyBvYmplY3RcbiAgICAgICAgY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICAgICAgICAgIGVuOiB7XG4gICAgICAgICAgICBidXNpbmVzc1R5cGU6IFwiQnVzaW5lc3MgVHlwZVwiLFxuICAgICAgICAgICAgYWRkcmVzczogXCJBZGRyZXNzXCIsXG4gICAgICAgICAgICBwaG9uZTogXCJQaG9uZVwiLFxuICAgICAgICAgICAgZW1haWw6IFwiRW1haWxcIixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcIkNhdGVnb3J5XCIsXG4gICAgICAgICAgICBzdGF0dXM6IFwiU3RhdHVzXCIsXG4gICAgICAgICAgICB2ZXJpZmllZDogXCJWZXJpZmllZFwiLFxuICAgICAgICAgICAgcGVuZGluZzogXCJQZW5kaW5nXCIsXG4gICAgICAgICAgICByYXRpbmc6IFwiUmF0aW5nXCIsXG4gICAgICAgICAgICByZXZpZXdzOiBcIlJldmlld3NcIixcbiAgICAgICAgICAgIGVzdGFibGlzaGVkOiBcIkVzdGFibGlzaGVkXCIsXG4gICAgICAgICAgICBlbXBsb3llZXM6IFwiRW1wbG95ZWVzXCIsXG4gICAgICAgICAgICB3b3JraW5nSG91cnM6IFwiV29ya2luZyBIb3Vyc1wiLFxuICAgICAgICAgICAgd2Vic2l0ZTogXCJXZWJzaXRlXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJEZXNjcmlwdGlvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXI6IHtcbiAgICAgICAgICAgIGJ1c2luZXNzVHlwZTogXCLZhtmI2Lkg2KfZhNmG2LTYp9i3XCIsXG4gICAgICAgICAgICBhZGRyZXNzOiBcItin2YTYudmG2YjYp9mGXCIsXG4gICAgICAgICAgICBwaG9uZTogXCLYp9mE2YfYp9iq2YFcIixcbiAgICAgICAgICAgIGVtYWlsOiBcItin2YTYqNix2YrYryDYp9mE2KXZhNmD2KrYsdmI2YbZilwiLFxuICAgICAgICAgICAgY2F0ZWdvcnk6IFwi2KfZhNmB2KbYqVwiLFxuICAgICAgICAgICAgc3RhdHVzOiBcItin2YTYrdin2YTYqVwiLFxuICAgICAgICAgICAgdmVyaWZpZWQ6IFwi2YXZiNir2YJcIixcbiAgICAgICAgICAgIHBlbmRpbmc6IFwi2YHZiiDYp9mE2KfZhtiq2LjYp9ixXCIsXG4gICAgICAgICAgICByYXRpbmc6IFwi2KfZhNiq2YLZitmK2YVcIixcbiAgICAgICAgICAgIHJldmlld3M6IFwi2KfZhNmF2LHYp9is2LnYp9iqXCIsXG4gICAgICAgICAgICBlc3RhYmxpc2hlZDogXCLYqtij2LPYsyDZgdmKXCIsXG4gICAgICAgICAgICBlbXBsb3llZXM6IFwi2KfZhNmF2YjYuNmB2YrZhlwiLFxuICAgICAgICAgICAgd29ya2luZ0hvdXJzOiBcItiz2KfYudin2Kog2KfZhNi52YXZhFwiLFxuICAgICAgICAgICAgd2Vic2l0ZTogXCLYp9mE2YXZiNmC2Lkg2KfZhNil2YTZg9iq2LHZiNmG2YpcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcItin2YTZiNi12YFcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHQgPVxuICAgICAgICAgIHRyYW5zbGF0aW9uc1tsYW5ndWFnZSBhcyBrZXlvZiB0eXBlb2YgdHJhbnNsYXRpb25zXSB8fFxuICAgICAgICAgIHRyYW5zbGF0aW9ucy5lbjtcblxuICAgICAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHRyYW5zbGF0aW9uIG9yIGZhbGxiYWNrXG4gICAgICAgIGNvbnN0IGdldFRyYW5zbGF0aW9uID0gKGtleTogc3RyaW5nLCBmYWxsYmFjazogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgcmV0dXJuICh0IGFzIGFueSlba2V5XSB8fCBmYWxsYmFjaztcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVc2UgYWN0dWFsIGJ1c2luZXNzIGRhdGEgd2l0aCBmYWxsYmFja3NcbiAgICAgICAgY29uc3QgYnVzaW5lc3NEYXRhID0ge1xuICAgICAgICAgIHBob25lOiBidXNpbmVzcy5waG9uZSB8fCBnZXRUcmFuc2xhdGlvbihcIm5vdEF2YWlsYWJsZVwiLCBcIk4vQVwiKSxcbiAgICAgICAgICBlbWFpbDogYnVzaW5lc3MuY29udGFjdEVtYWlsIHx8IGdldFRyYW5zbGF0aW9uKFwibm90QXZhaWxhYmxlXCIsIFwiTi9BXCIpLFxuICAgICAgICAgIHJhdGluZzogYnVzaW5lc3MucmF0aW5nIHx8IDAsXG4gICAgICAgICAgcmV2aWV3czogYnVzaW5lc3MucmV2aWV3c0NvdW50IHx8IDAsXG4gICAgICAgICAgd29ya2luZ0hvdXJzOiBnZXRUcmFuc2xhdGlvbihcIm5vdEF2YWlsYWJsZVwiLCBcIk4vQVwiKSxcbiAgICAgICAgICBzdGF0dXM6IGJ1c2luZXNzLnN0YXR1cyB8fCBcInBlbmRpbmdcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYnVzaW5lc3MuZGVzY3JpcHRpb24gfHwgXCJcIixcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0b29sdGlwQ29udGVudCA9IGBcbiAgICAgICAgICA8ZGl2IGRpcj1cIiR7XG4gICAgICAgICAgICBpc1J0bCA/IFwicnRsXCIgOiBcImx0clwiXG4gICAgICAgICAgfVwiIHN0eWxlPVwiYmFja2dyb3VuZDojZmZmO2JvcmRlcjoxcHggc29saWQgI2U1ZTdlYjtib3JkZXItcmFkaXVzOjEycHg7cGFkZGluZzoxMHB4IDEycHg7bWluLXdpZHRoOjQwMHB4O21heC13aWR0aDo1MDBweDtib3gtc2hhZG93OjAgOHB4IDIwcHggcmdiYSgwLDAsMCwwLjEyKTske1xuICAgICAgICAgIGlzUnRsID8gXCJkaXJlY3Rpb246cnRsO3RleHQtYWxpZ246cmlnaHQ7XCIgOiBcIlwiXG4gICAgICAgIH1cIj5cbiAgICAgICAgICAgIDwhLS0gSGVhZGVyIFJvdyAtLT5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO21hcmdpbi1ib3R0b206OHB4OyR7XG4gICAgICAgICAgICAgIGlzUnRsID8gXCJmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZTtcIiA6IFwiXCJcbiAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgPGgzIHN0eWxlPVwiZm9udC13ZWlnaHQ6NzAwO2NvbG9yOiMxMTE4Mjc7Zm9udC1zaXplOjE0cHg7bWFyZ2luOjA7XCI+JHtcbiAgICAgICAgICAgICAgICBidXNpbmVzcy5uYW1lXG4gICAgICAgICAgICAgIH08L2gzPlxuICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cInBhZGRpbmc6M3B4IDZweDtib3JkZXItcmFkaXVzOjEycHg7YmFja2dyb3VuZDoke1xuICAgICAgICAgICAgICAgIGJ1c2luZXNzRGF0YS5zdGF0dXMgPT09IFwidmVyaWZpZWRcIiA/IFwiIzEwQjk4MVwiIDogXCIjRjU5RTBCXCJcbiAgICAgICAgICAgICAgfTtjb2xvcjojZmZmO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NjAwO1wiPlxuICAgICAgICAgICAgICAgICR7YnVzaW5lc3NEYXRhLnN0YXR1cyA9PT0gXCJ2ZXJpZmllZFwiID8gdC52ZXJpZmllZCA6IHQucGVuZGluZ31cbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gTWFpbiBDb250ZW50IFJvdyAtLT5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OmZsZXg7Z2FwOjEycHg7YWxpZ24taXRlbXM6ZmxleC1zdGFydDske1xuICAgICAgICAgICAgICBpc1J0bCA/IFwiZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7XCIgOiBcIlwiXG4gICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgIDwhLS0gTGVmdCBDb2x1bW4gLS0+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OjE7bWluLXdpZHRoOjA7XCI+XG4gICAgICAgICAgICAgICAgPCEtLSBCdXNpbmVzcyBUeXBlICYgQ2F0ZWdvcnkgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6ZmxleDtmbGV4LXdyYXA6d3JhcDtnYXA6NnB4O21hcmdpbi1ib3R0b206NnB4OyR7XG4gICAgICAgICAgICAgICAgICBpc1J0bCA/IFwiZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7XCIgOiBcIlwiXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJwYWRkaW5nOjNweCA2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojM0I4MkY2O2NvbG9yOiNmZmY7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo2MDA7XCI+XG4gICAgICAgICAgICAgICAgICAgICR7YnVzaW5lc3MudHlwZX1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICR7KGJ1c2luZXNzLmNhdGVnb3JpZXMgfHwgW2J1c2luZXNzLmNhdGVnb3J5XSkubWFwKGNhdGVnb3J5ID0+IGBcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJwYWRkaW5nOjNweCA2cHg7Ym9yZGVyLXJhZGl1czo4cHg7YmFja2dyb3VuZDojNkI3MjgwO2NvbG9yOiNmZmY7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo2MDA7XCI+XG4gICAgICAgICAgICAgICAgICAgICAgJHtjYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgYCkuam9pbignJyl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8IS0tIEFkZHJlc3MgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206NnB4O1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiM2QjcyODA7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbToxcHg7XCI+JHtcbiAgICAgICAgICAgICAgICAgICAgdC5hZGRyZXNzXG4gICAgICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzM3NDE1MTtmb250LXNpemU6MTBweDtsaW5lLWhlaWdodDoxLjI7XCI+JHtcbiAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3MuYWRkcmVzc1xuICAgICAgICAgICAgICAgICAgfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPCEtLSBDb250YWN0IEluZm8gLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206NnB4O1wiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiM2QjcyODA7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbToxcHg7XCI+JHtcbiAgICAgICAgICAgICAgICAgICAgdC5waG9uZVxuICAgICAgICAgICAgICAgICAgfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiMzNzQxNTE7Zm9udC1zaXplOjlweDtcIj4ke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEucGhvbmVcbiAgICAgICAgICAgICAgICAgIH08L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPCEtLSBSaWdodCBDb2x1bW4gLS0+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJmbGV4OjE7bWluLXdpZHRoOjA7XCI+XG4gICAgICAgICAgICAgICAgPCEtLSBSYXRpbmcgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjRweDttYXJnaW4tYm90dG9tOjZweDske1xuICAgICAgICAgICAgICAgICAgaXNSdGwgPyBcImZsZXgtZGlyZWN0aW9uOnJvdy1yZXZlcnNlO1wiIDogXCJcIlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6I0Y1OUUwQjtmb250LXNpemU6MTBweDtcIj7irZA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cImNvbG9yOiMzNzQxNTE7Zm9udC1zaXplOjEwcHg7Zm9udC13ZWlnaHQ6NjAwO1wiPiR7XG4gICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRGF0YS5yYXRpbmdcbiAgICAgICAgICAgICAgICAgIH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cImNvbG9yOiM2QjcyODA7Zm9udC1zaXplOjhweDtcIj4oJHtcbiAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NEYXRhLnJldmlld3NcbiAgICAgICAgICAgICAgICAgIH0pPC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPCEtLSBFbWFpbCAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTo2cHg7XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzZCNzI4MDtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjFweDtcIj4ke1xuICAgICAgICAgICAgICAgICAgICB0LmVtYWlsXG4gICAgICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzM3NDE1MTtmb250LXNpemU6OXB4O1wiPiR7XG4gICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRGF0YS5lbWFpbFxuICAgICAgICAgICAgICAgICAgfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPCEtLSBBZGRpdGlvbmFsIEluZm8gLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImRpc3BsYXk6ZmxleDtnYXA6OHB4OyR7XG4gICAgICAgICAgICAgICAgICBpc1J0bCA/IFwiZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7XCIgOiBcIlwiXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwhLS0gUmF0aW5nIGFuZCBSZXZpZXdzIC0tPlxuICAgICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi10b3A6NnB4O3BhZGRpbmctdG9wOjZweDtib3JkZXItdG9wOjFweCBzb2xpZCAjZjNmNGY2O2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzZCNzI4MDtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjJweDtcIj5cbiAgICAgICAgICAgICAgICAgICR7dC5yYXRpbmcgfHwgXCJSYXRpbmdcIn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzM3NDE1MTtmb250LXNpemU6MTBweDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2dhcDoycHg7XCI+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj4ke2J1c2luZXNzRGF0YS5yYXRpbmd9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJyaS1zdGFyLWZpbGxcIiBzdHlsZT1cImNvbG9yOiNGNTlFMEI7Zm9udC1zaXplOjEycHg7XCI+PC9pPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJtYXJnaW4tbGVmdDo0cHg7Y29sb3I6IzZCNzI4MDtmb250LXNpemU6OXB4O1wiPigke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEucmV2aWV3c1xuICAgICAgICAgICAgICAgICAgfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojNkI3MjgwO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206MnB4O1wiPlxuICAgICAgICAgICAgICAgICAgJHt0LnN0YXR1cyB8fCBcIlN0YXR1c1wifVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojMzc0MTUxO2ZvbnQtc2l6ZToxMHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Z2FwOjJweDtcIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7d2lkdGg6OHB4O2hlaWdodDo4cHg7Ym9yZGVyLXJhZGl1czo1MCU7YmFja2dyb3VuZC1jb2xvcjoke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEuc3RhdHVzID09PSBcImFjdGl2ZVwiID8gXCIjMTBCOTgxXCIgOiBcIiNGNTlFMEJcIlxuICAgICAgICAgICAgICAgICAgfTtcIj48L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3Bhbj4ke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEuc3RhdHVzID09PSBcImFjdGl2ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgPyB0LnZlcmlmaWVkIHx8IFwiVmVyaWZpZWRcIlxuICAgICAgICAgICAgICAgICAgICAgIDogdC5wZW5kaW5nIHx8IFwiUGVuZGluZ1wiXG4gICAgICAgICAgICAgICAgICB9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgICAgICBtYXJrZXIuYmluZFRvb2x0aXAodG9vbHRpcENvbnRlbnQsIHtcbiAgICAgICAgICBkaXJlY3Rpb246IFwidG9wXCIsXG4gICAgICAgICAgb2Zmc2V0OiBbMCwgLTEwXSwgLy8g2YXZiNit2K8g2YTZhNi62KrZitmGXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBwZXJtYW5lbnQ6IGZhbHNlLFxuICAgICAgICAgIHN0aWNreTogdHJ1ZSxcbiAgICAgICAgICBpbnRlcmFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICBjbGFzc05hbWU6IFwibGVhZmxldC1idXNpbmVzcy10b29sdGlwXCIsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIE5vIGJ1dHRvbiBoYW5kbGVycyBuZWVkZWQgc2luY2Ugd2UgcmVtb3ZlZCB0aGUgYnV0dG9uc1xuXG4gICAgICAgIC8vINmF2KrYuu+/ve+/vdix2KfYqiDZhNmE2KrYrdmD2YUg2YHZiiDZgdiq2K0g2YjYpdi62YTYp9mCINin2YTZgCB0b29sdGlwXG4gICAgICAgIGxldCBpc1Rvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICAgIGxldCBjbG9zZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0O1xuICAgICAgICBsZXQgaXNIb3ZlcmluZ1Rvb2x0aXAgPSBmYWxzZTtcbiAgICAgICAgbGV0IGlzSG92ZXJpbmdNYXJrZXIgPSBmYWxzZTtcblxuICAgICAgICAvLyBIYW5kbGUgdG9vbHRpcCBldmVudHNcbiAgICAgICAgbWFya2VyLm9uKFwidG9vbHRpcG9wZW5cIiwgKGUpID0+IHtcbiAgICAgICAgICBpc1Rvb2x0aXBPcGVuID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCB0b29sdGlwID0gZS50b29sdGlwO1xuICAgICAgICAgIGNvbnN0IHRvb2x0aXBFbGVtZW50ID0gdG9vbHRpcC5nZXRFbGVtZW50KCk7XG5cbiAgICAgICAgICBpZiAodG9vbHRpcEVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIE5vIGJ1dHRvbiBldmVudCBsaXN0ZW5lcnMgbmVlZGVkIHNpbmNlIHdlIHJlbW92ZWQgdGhlIGJ1dHRvbnNcblxuICAgICAgICAgICAgLy8g2YXZhti5INil2LrZhNin2YIg2KfZhNmAIHRvb2x0aXAg2LnZhtivIGhvdmVyINi52YTZitmHXG4gICAgICAgICAgICB0b29sdGlwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgIGlzSG92ZXJpbmdUb29sdGlwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNsb3NlVGltZW91dCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdG9vbHRpcEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICBpc0hvdmVyaW5nVG9vbHRpcCA9IGZhbHNlO1xuICAgICAgICAgICAgICAvLyDYpdi62YTYp9mCINin2YTZgCB0b29sdGlwINio2LnYryDZhdi62KfYr9ix2Kkg2KfZhNmF2KfZiNizINio2YHYqtix2Kkg2YLYtdmK2LHYqSDZgdmC2Lcg2KXYsNinINmE2YUg2YbZg9mGINmGaG92ZXIg2LnZhNmJINin2YTZgCBtYXJrZXJcbiAgICAgICAgICAgICAgY2xvc2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0hvdmVyaW5nVG9vbHRpcCAmJiAhaXNIb3ZlcmluZ01hcmtlciAmJiBpc1Rvb2x0aXBPcGVuKSB7XG4gICAgICAgICAgICAgICAgICBtYXJrZXIuY2xvc2VUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgICBpc1Rvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBtYXJrZXIub24oXCJ0b29sdGlwY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICAgIGlzVG9vbHRpcE9wZW4gPSBmYWxzZTtcbiAgICAgICAgICBpc0hvdmVyaW5nVG9vbHRpcCA9IGZhbHNlO1xuICAgICAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVvdXQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIb3ZlciBiZWhhdmlvciAtINmF2YbYt9mCINmF2K3Ys9mGINmE2YXZhti5INin2YTZgCBmbGlja2VyaW5nXG4gICAgICAgIG1hcmtlci5vbihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgICAgICAgaXNIb3ZlcmluZ01hcmtlciA9IHRydWU7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KGNsb3NlVGltZW91dCk7XG4gICAgICAgICAgaWYgKCFpc1Rvb2x0aXBPcGVuKSB7XG4gICAgICAgICAgICBtYXJrZXIub3BlblRvb2x0aXAoKTtcbiAgICAgICAgICAgIG9uQnVzaW5lc3NDbGljayhidXNpbmVzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBtYXJrZXIub24oXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgICAgICAgaXNIb3ZlcmluZ01hcmtlciA9IGZhbHNlO1xuICAgICAgICAgIC8vINil2LrZhNin2YIg2KfZhNmAIHRvb2x0aXAg2KjYudivINmF2LrYp9iv2LHYqSDYp9mE2YXYp9mI2LMg2KjZgdiq2LHYqSDZgti12YrYsdipINmB2YLYtyDYpdiw2Kcg2YTZhSDZhtmD2YYg2YZob3ZlciDYudmE2Ykg2KfZhNmAIHRvb2x0aXBcbiAgICAgICAgICBjbG9zZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICghaXNIb3ZlcmluZ1Rvb2x0aXAgJiYgIWlzSG92ZXJpbmdNYXJrZXIgJiYgaXNUb29sdGlwT3Blbikge1xuICAgICAgICAgICAgICBtYXJrZXIuY2xvc2VUb29sdGlwKCk7XG4gICAgICAgICAgICAgIGlzVG9vbHRpcE9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbHNvIGhhbmRsZSBjbGljayBvbiBtYXJrZXJcbiAgICAgICAgbWFya2VyLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgIG9uQnVzaW5lc3NDbGljayhidXNpbmVzcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5ld01hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgICAgfSk7XG5cbiAgICAgIHNldE1hcmtlcnMobmV3TWFya2Vycyk7XG5cbiAgICAgIC8vIEZpdCBtYXAgdG8gc2hvdyBhbGwgbWFya2VycyBpZiB0aGVyZSBhcmUgYW55XG4gICAgICBpZiAoYnVzaW5lc3Nlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGdyb3VwID0gTC5mZWF0dXJlR3JvdXAobmV3TWFya2Vycyk7XG4gICAgICAgIG1hcC5maXRCb3VuZHMoZ3JvdXAuZ2V0Qm91bmRzKCksIHsgcGFkZGluZzogWzIwLCAyMF0gfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHVwZGF0ZU1hcmtlcnMoKTtcbiAgfSwgW21hcCwgaXNDbGllbnQsIGJ1c2luZXNzZXMsIG9uQnVzaW5lc3NDbGljaywgbGFuZ3VhZ2VdKTtcblxuICBjb25zdCBnZXRCdXNpbmVzc01hcmtlckNvbG9yID0gKHR5cGU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGNvbG9yczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICAgIEVsZWN0cm9uaWNzOiBcIiMzQjgyRjZcIixcbiAgICAgIEF1dG9tb3RpdmU6IFwiI0VGNDQ0NFwiLFxuICAgICAgQWdyaWN1bHR1cmU6IFwiIzEwQjk4MVwiLFxuICAgICAgSW5kdXN0cmlhbDogXCIjRjU5RTBCXCIsXG4gICAgICBDb25zdHJ1Y3Rpb246IFwiI0VBQjMwOFwiLFxuICAgICAgRmFzaGlvbjogXCIjRUM0ODk5XCIsXG4gICAgICBNZWRpY2FsOiBcIiMxNEI4QTZcIixcbiAgICAgIEZvb2Q6IFwiI0Y5NzMxNlwiLFxuICAgICAgVGVjaG5vbG9neTogXCIjOEI1Q0Y2XCIsXG4gICAgICBcIk9pbCZHYXNcIjogXCIjMDAwMDAwXCIsXG4gICAgICBNYXJpbmU6IFwiIzFENEVEOFwiLFxuICAgICAgTWluaW5nOiBcIiM3ODcxNkNcIixcbiAgICAgIFRvdXJpc206IFwiI0Y0M0Y1RVwiLFxuICAgICAgVGV4dGlsZXM6IFwiI0Q5NDZFRlwiLFxuICAgICAgRXF1aXBtZW50OiBcIiM0NzU1NjlcIixcbiAgICAgIE1pbGl0YXJ5OiBcIiMxNjY1MzRcIixcbiAgICAgIExvZ2lzdGljczogXCIjMUU0MEFGXCIsXG4gICAgICBQb3J0OiBcIiMxRTNBOEFcIixcbiAgICAgIEZpc2hpbmc6IFwiIzYwQTVGQVwiLFxuICAgICAgUGVyZnVtZXM6IFwiIzdDM0FFRFwiLFxuICAgICAgUGV0cm9jaGVtaWNhbDogXCIjMzc0MTUxXCIsXG4gICAgfTtcbiAgICByZXR1cm4gY29sb3JzW3R5cGVdIHx8IFwiIzZCNzI4MFwiO1xuICB9O1xuXG4gIGlmICghaXNDbGllbnQpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmF5LTEwMCByb3VuZGVkLTJ4bCBoLTY0IHNtOmgtODAgbWQ6aC1bMjhyZW1dIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8aSBjbGFzc05hbWU9XCJyaS1tYXAtcGluLWxpbmUgdGV4dC0zeGwgdGV4dC15ZWxsb3ctNTAwIG1iLTIgYW5pbWF0ZS1wdWxzZVwiPjwvaT5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+TG9hZGluZyBtYXAuLi48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcm91bmRlZC0yeGwgb3ZlcmZsb3ctaGlkZGVuIHNoYWRvdy14bCBoLTY0IHNtOmgtODAgbWQ6aC1bMjhyZW1dIHJlbGF0aXZlIHotMFwiXG4gICAgICBzdHlsZT17eyB6SW5kZXg6IDAgfX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIHJlZj17bWFwUmVmfVxuICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgaC1mdWxsIHJvdW5kZWQtMnhsIHotMFwiXG4gICAgICAgIHN0eWxlPXt7IHpJbmRleDogMCB9fVxuICAgICAgLz5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEludGVyYWN0aXZlTWFwO1xuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwidXNlTGFuZ3VhZ2UiLCJJbnRlcmFjdGl2ZU1hcCIsImJ1c2luZXNzZXMiLCJvbkJ1c2luZXNzQ2xpY2siLCJtYXBTdHlsZSIsInByb3BNYXBTdHlsZSIsIm1hcFJlZiIsIm1hcCIsInNldE1hcCIsIm1hcmtlcnMiLCJzZXRNYXJrZXJzIiwiaXNDbGllbnQiLCJzZXRJc0NsaWVudCIsInRpbGVMYXllclJlZiIsImxhbmd1YWdlIiwic2V0TWFwU3R5bGUiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudCIsImlzTW91bnRlZCIsIm1hcEluc3RhbmNlIiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsImluaXRNYXAiLCJMIiwic2lnbmFsIiwiYWJvcnRlZCIsIkljb24iLCJEZWZhdWx0IiwicHJvdG90eXBlIiwiX2dldEljb25VcmwiLCJtZXJnZU9wdGlvbnMiLCJpY29uUmV0aW5hVXJsIiwiaWNvblVybCIsInNoYWRvd1VybCIsInNldFZpZXciLCJyZW1vdmUiLCJwYW5lcyIsImdldFBhbmVzIiwibWFwUGFuZSIsInN0eWxlIiwiekluZGV4IiwidGlsZVBhbmUiLCJvdmVybGF5UGFuZSIsInNoYWRvd1BhbmUiLCJtYXJrZXJQYW5lIiwicG9wdXBQYW5lIiwidG9vbHRpcFBhbmUiLCJjb250cm9sQ29udGFpbmVyIiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm1hcFRpbGVyS2V5IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX01BUFRJTEVSX0tFWSIsImxlbmd0aCIsIk1hcHRpbGVyTGF5ZXIiLCJpbml0aWFsTGFuZ3VhZ2UiLCJsYXllciIsImFwaUtleSIsImFkZFRvIiwidGlsZVVybCIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwibWF4Wm9vbSIsIm1pblpvb20iLCJSZXNldENvbnRyb2wiLCJDb250cm9sIiwiZXh0ZW5kIiwib25BZGQiLCJkaXYiLCJEb21VdGlsIiwiY3JlYXRlIiwiaW5uZXJIVE1MIiwib25jbGljayIsIm9wdGlvbnMiLCJwb3NpdGlvbiIsInJlc2V0Q29udHJvbCIsImVycm9yIiwiYWJvcnQiLCJ1cGRhdGVUaWxlcyIsInJlbW92ZUxheWVyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwidGFyZ2V0TGFuZ3VhZ2UiLCJFcnJvciIsIm5hbWUiLCJ0aW1lciIsImNsZWFyVGltZW91dCIsInVwZGF0ZU1hcmtlcnMiLCJmb3JFYWNoIiwibWFya2VyIiwicmVtb3ZlRnJvbSIsIm5ld01hcmtlcnMiLCJidXNpbmVzcyIsIm1hcmtlckNvbG9yIiwiZ2V0QnVzaW5lc3NNYXJrZXJDb2xvciIsInR5cGUiLCJjdXN0b21JY29uIiwiZGl2SWNvbiIsImNsYXNzTmFtZSIsImh0bWwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJsYXQiLCJsbmciLCJpY29uIiwidGl0bGUiLCJpc1J0bCIsInRyYW5zbGF0aW9ucyIsImVuIiwiYnVzaW5lc3NUeXBlIiwiYWRkcmVzcyIsInBob25lIiwiZW1haWwiLCJjYXRlZ29yeSIsInN0YXR1cyIsInZlcmlmaWVkIiwicGVuZGluZyIsInJhdGluZyIsInJldmlld3MiLCJlc3RhYmxpc2hlZCIsImVtcGxveWVlcyIsIndvcmtpbmdIb3VycyIsIndlYnNpdGUiLCJkZXNjcmlwdGlvbiIsImFyIiwidCIsImdldFRyYW5zbGF0aW9uIiwia2V5IiwiZmFsbGJhY2siLCJidXNpbmVzc0RhdGEiLCJjb250YWN0RW1haWwiLCJyZXZpZXdzQ291bnQiLCJ0b29sdGlwQ29udGVudCIsImNhdGVnb3JpZXMiLCJqb2luIiwiYmluZFRvb2x0aXAiLCJkaXJlY3Rpb24iLCJvZmZzZXQiLCJvcGFjaXR5IiwicGVybWFuZW50Iiwic3RpY2t5IiwiaW50ZXJhY3RpdmUiLCJpc1Rvb2x0aXBPcGVuIiwiY2xvc2VUaW1lb3V0IiwiaXNIb3ZlcmluZ1Rvb2x0aXAiLCJpc0hvdmVyaW5nTWFya2VyIiwib24iLCJlIiwidG9vbHRpcCIsInRvb2x0aXBFbGVtZW50IiwiZ2V0RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZVRvb2x0aXAiLCJvcGVuVG9vbHRpcCIsInB1c2giLCJncm91cCIsImZlYXR1cmVHcm91cCIsImZpdEJvdW5kcyIsImdldEJvdW5kcyIsInBhZGRpbmciLCJjb2xvcnMiLCJFbGVjdHJvbmljcyIsIkF1dG9tb3RpdmUiLCJBZ3JpY3VsdHVyZSIsIkluZHVzdHJpYWwiLCJDb25zdHJ1Y3Rpb24iLCJGYXNoaW9uIiwiTWVkaWNhbCIsIkZvb2QiLCJUZWNobm9sb2d5IiwiTWFyaW5lIiwiTWluaW5nIiwiVG91cmlzbSIsIlRleHRpbGVzIiwiRXF1aXBtZW50IiwiTWlsaXRhcnkiLCJMb2dpc3RpY3MiLCJQb3J0IiwiRmlzaGluZyIsIlBlcmZ1bWVzIiwiUGV0cm9jaGVtaWNhbCIsImkiLCJwIiwicmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/InteractiveMap.tsx\n"));

/***/ })

});