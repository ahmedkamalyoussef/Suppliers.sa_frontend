"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./components/InteractiveMap.tsx":
/*!***************************************!*\
  !*** ./components/InteractiveMap.tsx ***!
  \***************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/LanguageContext */ \"(app-pages-browser)/./lib/LanguageContext.tsx\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n// components/InteractiveMap.tsx\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\nconst InteractiveMap = (param)=>{\n    let { businesses, onBusinessClick, mapStyle: propMapStyle } = param;\n    _s();\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [map, setMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const tileLayerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { language } = (0,_lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__.useLanguage)();\n    const [mapStyle, setMapStyle] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(propMapStyle || \"streets\"); // متغير للـ style\n    // Debug log for language changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"InteractiveMap: Language changed to:\", language);\n    }, [\n        language\n    ]);\n    // Update map style when prop changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (propMapStyle && propMapStyle !== mapStyle) {\n            console.log(\"InteractiveMap: Map style changed to:\", propMapStyle);\n            setMapStyle(propMapStyle);\n        }\n    }, [\n        propMapStyle,\n        mapStyle\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setIsClient(true);\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!isClient || !mapRef.current || map) return;\n        let isMounted = true;\n        let mapInstance = null;\n        let controller = new AbortController();\n        // Dynamic import لـ Leaflet\n        const initMap = async ()=>{\n            try {\n                const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n                // Load MapTiler Leaflet SDK to augment L with maptilerLayer (for vector multilingual tiles)\n                await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                if (!isMounted || !mapRef.current || controller.signal.aborted) return;\n                // إصلاح مشكلة الـ default markers\n                delete L.Icon.Default.prototype._getIconUrl;\n                L.Icon.Default.mergeOptions({\n                    iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n                    iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n                    shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n                });\n                // Initialize map - نبدأ بمنطقة السعودية\n                mapInstance = L.map(mapRef.current).setView([\n                    23.8859,\n                    45.0792\n                ], 6);\n                if (!isMounted || controller.signal.aborted) {\n                    mapInstance.remove();\n                    return;\n                }\n                // Force low z-index for all map panes so it never overlaps other UI\n                const panes = mapInstance.getPanes();\n                if (panes === null || panes === void 0 ? void 0 : panes.mapPane) panes.mapPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.tilePane) panes.tilePane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.overlayPane) panes.overlayPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.shadowPane) panes.shadowPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.markerPane) panes.markerPane.style.zIndex = \"0\";\n                if (panes === null || panes === void 0 ? void 0 : panes.popupPane) panes.popupPane.style.zIndex = \"0\";\n                if (panes && panes.tooltipPane) panes.tooltipPane.style.zIndex = \"1\";\n                const controlContainer = mapInstance.getContainer().querySelector(\".leaflet-control-container\");\n                if (controlContainer) controlContainer.style.zIndex = \"0\";\n                // Choose tile source. Prefer MapTiler SDK for language switching; fallback to OSM.\n                const mapTilerKey = process.env.NEXT_PUBLIC_MAPTILER_KEY;\n                console.log(\"Initial MapTiler Key exists:\", !!mapTilerKey);\n                console.log(\"Initial MapTiler Key length:\", (mapTilerKey === null || mapTilerKey === void 0 ? void 0 : mapTilerKey.length) || 0);\n                console.log(\"Initial language:\", language);\n                if (mapTilerKey) {\n                    const { MaptilerLayer } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                    const initialLanguage = language === \"ar\" ? \"ar\" : \"en\";\n                    console.log(\"Initial MapTiler language:\", initialLanguage);\n                    const layer = new MaptilerLayer({\n                        apiKey: mapTilerKey,\n                        style: mapStyle,\n                        language: initialLanguage\n                    });\n                    tileLayerRef.current = layer;\n                    if (isMounted) {\n                        layer.addTo(mapInstance);\n                    }\n                } else {\n                    const tileUrl = \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\";\n                    tileLayerRef.current = L.tileLayer(tileUrl, {\n                        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n                        maxZoom: 18,\n                        minZoom: 3\n                    }).addTo(mapInstance);\n                }\n                // Add custom control to reset to Saudi Arabia\n                const ResetControl = L.Control.extend({\n                    onAdd: function() {\n                        const div = L.DomUtil.create(\"div\", \"reset-control\");\n                        div.innerHTML = \"\\n        <button style=\\\"\\n          background: white;\\n          border: 2px solid #3B82F6;\\n          border-radius: 5px;\\n          padding: 8px 16px;\\n          cursor: pointer;\\n          font-weight: bold;\\n          color: #3B82F6;\\n          box-shadow: 0 2px 8px rgba(0,0,0,0.2);\\n          transition: all 0.2s;\\n        \\\"\\n        onmouseover=\\\"this.style.background='#f0f9ff'; this.style.transform='scale(1.05)'\\\"\\n        onmouseout=\\\"this.style.background='white'; this.style.transform='scale(1)'\\\"\\n        title=\\\"Back to Saudi Arabia\\\">\\n          \\uD83C\\uDDF8\\uD83C\\uDDE6\\n        </button>\\n      \";\n                        div.onclick = ()=>{\n                            mapInstance.setView([\n                                23.8859,\n                                45.0792\n                            ], 6);\n                        };\n                        return div;\n                    },\n                    options: {\n                        position: \"topright\"\n                    }\n                });\n                const resetControl = new ResetControl();\n                resetControl.addTo(mapInstance);\n                if (isMounted) {\n                    setMap(mapInstance);\n                }\n            } catch (error) {\n                console.error(\"Error initializing map:\", error);\n            }\n        };\n        initMap();\n        return ()=>{\n            isMounted = false;\n            controller.abort();\n            if (mapInstance) {\n                try {\n                    mapInstance.remove();\n                } catch (error) {\n                    console.error(\"Error removing map:\", error);\n                }\n            }\n        };\n    }, [\n        isClient\n    ]);\n    // Update base tiles when language changes (for MapTiler). If no key, OSM remains unchanged.\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map || !isClient) return;\n        let isMounted = true;\n        let controller = new AbortController();\n        const updateTiles = async ()=>{\n            try {\n                const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n                await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                const mapTilerKey = process.env.NEXT_PUBLIC_MAPTILER_KEY;\n                if (!isMounted || !map || controller.signal.aborted) return;\n                // Debug log for production\n                console.log(\"MapTiler Key exists:\", !!mapTilerKey);\n                console.log(\"MapTiler Key length:\", (mapTilerKey === null || mapTilerKey === void 0 ? void 0 : mapTilerKey.length) || 0);\n                console.log(\"Current language:\", language);\n                console.log(\"Language type:\", typeof language);\n                if (!mapTilerKey) {\n                    console.log(\"No MapTiler key, using OSM tiles\");\n                    return; // OSM doesn't support language switching\n                }\n                // Safely remove old layer\n                if (tileLayerRef.current && map && !controller.signal.aborted) {\n                    try {\n                        map.removeLayer(tileLayerRef.current);\n                        tileLayerRef.current = null;\n                        // Small delay to ensure layer is fully removed before adding new one\n                        await new Promise((resolve)=>setTimeout(resolve, 50));\n                    } catch (error) {\n                        console.error(\"Error removing tile layer:\", error);\n                    }\n                }\n                if (!isMounted || !map || controller.signal.aborted) return;\n                const { MaptilerLayer } = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_maptiler_leaflet-maptilersdk_dist_leaflet-maptilersdk_js\").then(__webpack_require__.bind(__webpack_require__, /*! @maptiler/leaflet-maptilersdk */ \"(app-pages-browser)/./node_modules/@maptiler/leaflet-maptilersdk/dist/leaflet-maptilersdk.js\"));\n                const targetLanguage = language === \"ar\" ? \"ar\" : \"en\";\n                console.log(\"Setting MapTiler language to:\", targetLanguage);\n                const layer = new MaptilerLayer({\n                    apiKey: mapTilerKey,\n                    style: mapStyle,\n                    language: targetLanguage\n                });\n                if (isMounted && map && !controller.signal.aborted) {\n                    tileLayerRef.current = layer;\n                    layer.addTo(map);\n                }\n            } catch (error) {\n                if (error instanceof Error && error.name === \"AbortError\") {\n                    console.log(\"Tile update was cancelled\");\n                } else {\n                    console.error(\"Error updating tiles:\", error);\n                }\n            }\n        };\n        // Debounce tile updates to prevent rapid changes\n        const timer = setTimeout(()=>{\n            updateTiles();\n        }, 300);\n        return ()=>{\n            isMounted = false;\n            controller.abort();\n            clearTimeout(timer);\n        };\n    }, [\n        language,\n        map,\n        isClient,\n        mapStyle\n    ]);\n    // Update markers when businesses change\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map || !isClient) return;\n        const updateMarkers = async ()=>{\n            const L = await __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_leaflet_dist_leaflet-src_js\").then(__webpack_require__.t.bind(__webpack_require__, /*! leaflet */ \"(app-pages-browser)/./node_modules/leaflet/dist/leaflet-src.js\", 23));\n            // Remove existing markers\n            markers.forEach((marker)=>marker.removeFrom(map));\n            const newMarkers = [];\n            businesses.forEach((business)=>{\n                const markerColor = getBusinessMarkerColor(business.type);\n                // Create custom marker\n                const customIcon = L.divIcon({\n                    className: \"custom-marker\",\n                    html: '\\n            <div style=\"\\n              background-color: '.concat(markerColor, ';\\n              width: 20px;\\n              height: 20px;\\n              border-radius: 50%;\\n              border: 3px solid white;\\n              box-shadow: none;\\n              cursor: pointer;\\n            \"></div>\\n          '),\n                    iconSize: [\n                        20,\n                        20\n                    ],\n                    iconAnchor: [\n                        10,\n                        10\n                    ]\n                });\n                const marker = L.marker([\n                    business.lat,\n                    business.lng\n                ], {\n                    icon: customIcon,\n                    title: business.name\n                }).addTo(map);\n                // Build hover tooltip content with translations\n                const isRtl = language === \"ar\";\n                // Translations object\n                const translations = {\n                    en: {\n                        businessType: \"Business Type\",\n                        address: \"Address\",\n                        phone: \"Phone\",\n                        email: \"Email\",\n                        category: \"Category\",\n                        status: \"Status\",\n                        verified: \"Verified\",\n                        pending: \"Pending\",\n                        rating: \"Rating\",\n                        reviews: \"Reviews\",\n                        established: \"Established\",\n                        employees: \"Employees\",\n                        workingHours: \"Working Hours\",\n                        website: \"Website\",\n                        description: \"Description\"\n                    },\n                    ar: {\n                        businessType: \"نوع النشاط\",\n                        address: \"العنوان\",\n                        phone: \"الهاتف\",\n                        email: \"البريد الإلكتروني\",\n                        category: \"الفئة\",\n                        status: \"الحالة\",\n                        verified: \"موثق\",\n                        pending: \"في الانتظار\",\n                        rating: \"التقييم\",\n                        reviews: \"المراجعات\",\n                        established: \"تأسس في\",\n                        employees: \"الموظفين\",\n                        workingHours: \"ساعات العمل\",\n                        website: \"الموقع الإلكتروني\",\n                        description: \"الوصف\"\n                    }\n                };\n                const t = translations[language] || translations.en;\n                // Generate some realistic business data\n                const businessData = {\n                    phone: business.phone || \"+966 \".concat(Math.floor(Math.random() * 9000000000) + 1000000000),\n                    email: business.email || \"\".concat(business.name.toLowerCase().replace(/\\s+/g, \"\"), \"@company.com\"),\n                    rating: (Math.random() * 2 + 3).toFixed(1),\n                    reviews: Math.floor(Math.random() * 200) + 10,\n                    workingHours: language === \"ar\" ? \"8:00 ص - 6:00 م\" : \"8:00 AM - 6:00 PM\",\n                    website: \"www.\".concat(business.name.toLowerCase().replace(/\\s+/g, \"\"), \".com\"),\n                    status: Math.random() > 0.3 ? \"verified\" : \"pending\",\n                    description: language === \"ar\" ? \"شركة رائدة في مجالها تقدم خدمات عالية الجودة لعملائها\" : \"Leading company in its field providing high-quality services to clients\"\n                };\n                const tooltipContent = '\\n          <div dir=\"'.concat(isRtl ? \"rtl\" : \"ltr\", '\" style=\"background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:10px 12px;min-width:400px;max-width:500px;box-shadow:0 8px 20px rgba(0,0,0,0.12);').concat(isRtl ? \"direction:rtl;text-align:right;\" : \"\", '\">\\n            <!-- Header Row -->\\n            <div style=\"display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n              <h3 style=\"font-weight:700;color:#111827;font-size:14px;margin:0;\">').concat(business.name, '</h3>\\n              <span style=\"padding:3px 6px;border-radius:12px;background:').concat(businessData.status === \"verified\" ? \"#10B981\" : \"#F59E0B\", ';color:#fff;font-size:9px;font-weight:600;\">\\n                ').concat(businessData.status === \"verified\" ? t.verified : t.pending, '\\n              </span>\\n            </div>\\n\\n            <!-- Main Content Row -->\\n            <div style=\"display:flex;gap:12px;align-items:flex-start;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n              <!-- Left Column -->\\n              <div style=\"flex:1;min-width:0;\">\\n                <!-- Business Type & Category -->\\n                <div style=\"display:flex;gap:6px;margin-bottom:6px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  <span style=\"padding:3px 6px;border-radius:8px;background:#3B82F6;color:#fff;font-size:9px;font-weight:600;\">\\n                    ').concat(business.type, '\\n                  </span>\\n                  <span style=\"padding:3px 6px;border-radius:8px;background:#6B7280;color:#fff;font-size:9px;font-weight:600;\">\\n                    ').concat(business.category, '\\n                  </span>\\n                </div>\\n\\n                <!-- Address -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.address, '</div>\\n                  <div style=\"color:#374151;font-size:10px;line-height:1.2;\">').concat(business.address, '</div>\\n                </div>\\n\\n                <!-- Contact Info -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.phone, '</div>\\n                  <div style=\"color:#374151;font-size:9px;\">').concat(businessData.phone, '</div>\\n                </div>\\n              </div>\\n\\n              <!-- Right Column -->\\n              <div style=\"flex:1;min-width:0;\">\\n                <!-- Rating -->\\n                <div style=\"display:flex;align-items:center;gap:4px;margin-bottom:6px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  <span style=\"color:#F59E0B;font-size:10px;\">⭐</span>\\n                  <span style=\"color:#374151;font-size:10px;font-weight:600;\">').concat(businessData.rating, '</span>\\n                  <span style=\"color:#6B7280;font-size:8px;\">(').concat(businessData.reviews, ')</span>\\n                </div>\\n\\n                <!-- Email -->\\n                <div style=\"margin-bottom:6px;\">\\n                  <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:1px;\">').concat(t.email, '</div>\\n                  <div style=\"color:#374151;font-size:9px;\">').concat(businessData.email, '</div>\\n                </div>\\n\\n                <!-- Additional Info -->\\n                <div style=\"display:flex;gap:8px;').concat(isRtl ? \"flex-direction:row-reverse;\" : \"\", '\">\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n\\n            <!-- Working Hours Row -->\\n            <div style=\"margin-top:6px;padding-top:6px;border-top:1px solid #f3f4f6;\">\\n              <div style=\"color:#6B7280;font-size:9px;font-weight:600;margin-bottom:2px;\">').concat(t.workingHours, '</div>\\n              <div style=\"color:#374151;font-size:10px;\">').concat(businessData.workingHours, \"</div>\\n            </div>\\n          </div>\\n        \");\n                marker.bindTooltip(tooltipContent, {\n                    direction: \"top\",\n                    offset: [\n                        0,\n                        -10\n                    ],\n                    opacity: 1,\n                    permanent: false,\n                    sticky: true,\n                    interactive: true,\n                    className: \"leaflet-business-tooltip\"\n                });\n                // No button handlers needed since we removed the buttons\n                // متغ��رات للتحكم في فتح وإغلاق الـ tooltip\n                let isTooltipOpen = false;\n                let closeTimeout;\n                let isHoveringTooltip = false;\n                let isHoveringMarker = false;\n                // Handle tooltip events\n                marker.on(\"tooltipopen\", (e)=>{\n                    isTooltipOpen = true;\n                    const tooltip = e.tooltip;\n                    const tooltipElement = tooltip.getElement();\n                    if (tooltipElement) {\n                        // No button event listeners needed since we removed the buttons\n                        // منع إغلاق الـ tooltip عند hover عليه\n                        tooltipElement.addEventListener(\"mouseenter\", ()=>{\n                            isHoveringTooltip = true;\n                            clearTimeout(closeTimeout);\n                        });\n                        tooltipElement.addEventListener(\"mouseleave\", ()=>{\n                            isHoveringTooltip = false;\n                            // إغلاق الـ tooltip بعد مغادرة الماوس بفترة قصيرة فقط إذا لم نكن نhover على الـ marker\n                            closeTimeout = setTimeout(()=>{\n                                if (!isHoveringTooltip && !isHoveringMarker && isTooltipOpen) {\n                                    marker.closeTooltip();\n                                    isTooltipOpen = false;\n                                }\n                            }, 100);\n                        });\n                    }\n                });\n                marker.on(\"tooltipclose\", ()=>{\n                    isTooltipOpen = false;\n                    isHoveringTooltip = false;\n                    clearTimeout(closeTimeout);\n                });\n                // Hover behavior - منطق محسن لمنع الـ flickering\n                marker.on(\"mouseover\", ()=>{\n                    isHoveringMarker = true;\n                    clearTimeout(closeTimeout);\n                    if (!isTooltipOpen) {\n                        marker.openTooltip();\n                        onBusinessClick(business);\n                    }\n                });\n                marker.on(\"mouseout\", ()=>{\n                    isHoveringMarker = false;\n                    // إغلاق الـ tooltip بعد مغادرة الماوس بفترة قصيرة فقط إذا لم نكن نhover على الـ tooltip\n                    closeTimeout = setTimeout(()=>{\n                        if (!isHoveringTooltip && !isHoveringMarker && isTooltipOpen) {\n                            marker.closeTooltip();\n                            isTooltipOpen = false;\n                        }\n                    }, 100);\n                });\n                // Also handle click on marker\n                marker.on(\"click\", ()=>{\n                    onBusinessClick(business);\n                });\n                newMarkers.push(marker);\n            });\n            setMarkers(newMarkers);\n            // Fit map to show all markers if there are any\n            if (businesses.length > 0) {\n                const group = L.featureGroup(newMarkers);\n                map.fitBounds(group.getBounds(), {\n                    padding: [\n                        20,\n                        20\n                    ]\n                });\n            }\n        };\n        updateMarkers();\n    }, [\n        map,\n        isClient,\n        businesses,\n        onBusinessClick,\n        language\n    ]);\n    const getBusinessMarkerColor = (type)=>{\n        const colors = {\n            Electronics: \"#3B82F6\",\n            Automotive: \"#EF4444\",\n            Agriculture: \"#10B981\",\n            Industrial: \"#F59E0B\",\n            Construction: \"#EAB308\",\n            Fashion: \"#EC4899\",\n            Medical: \"#14B8A6\",\n            Food: \"#F97316\",\n            Technology: \"#8B5CF6\",\n            \"Oil&Gas\": \"#000000\",\n            Marine: \"#1D4ED8\",\n            Mining: \"#78716C\",\n            Tourism: \"#F43F5E\",\n            Textiles: \"#D946EF\",\n            Equipment: \"#475569\",\n            Military: \"#166534\",\n            Logistics: \"#1E40AF\",\n            Port: \"#1E3A8A\",\n            Fishing: \"#60A5FA\",\n            Perfumes: \"#7C3AED\",\n            Petrochemical: \"#374151\"\n        };\n        return colors[type] || \"#6B7280\";\n    };\n    if (!isClient) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-gray-100 rounded-2xl h-64 sm:h-80 md:h-[28rem] flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"i\", {\n                        className: \"ri-map-pin-line text-3xl text-yellow-500 mb-2 animate-pulse\"\n                    }, void 0, false, {\n                        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                        lineNumber: 599,\n                        columnNumber: 11\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: \"Loading map...\"\n                    }, void 0, false, {\n                        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                        lineNumber: 600,\n                        columnNumber: 11\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n                lineNumber: 598,\n                columnNumber: 9\n            }, undefined)\n        }, void 0, false, {\n            fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n            lineNumber: 597,\n            columnNumber: 7\n        }, undefined);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-gray-100 rounded-2xl overflow-hidden shadow-xl h-64 sm:h-80 md:h-[28rem] relative z-0\",\n        style: {\n            zIndex: 0\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            ref: mapRef,\n            className: \"w-full h-full rounded-2xl z-0\",\n            style: {\n                zIndex: 0\n            }\n        }, void 0, false, {\n            fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n            lineNumber: 611,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/home/kemo/Development/Work/mostaql/Supplier.sa1/components/InteractiveMap.tsx\",\n        lineNumber: 607,\n        columnNumber: 5\n    }, undefined);\n};\n_s(InteractiveMap, \"7XcAYp1cOCziRvvg5rd+AzkEDF8=\", false, function() {\n    return [\n        _lib_LanguageContext__WEBPACK_IMPORTED_MODULE_2__.useLanguage\n    ];\n});\n_c = InteractiveMap;\n/* harmony default export */ __webpack_exports__[\"default\"] = (InteractiveMap);\nvar _c;\n$RefreshReg$(_c, \"InteractiveMap\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW50ZXJhY3RpdmVNYXAudHN4IiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGdDQUFnQzs7O0FBR29CO0FBQ0E7QUFxQnBELE1BQU1JLGlCQUFpQjtRQUFDLEVBQ3RCQyxVQUFVLEVBQ1ZDLGVBQWUsRUFDZkMsVUFBVUMsWUFBWSxFQUNiOztJQUNULE1BQU1DLFNBQVNSLDZDQUFNQSxDQUFpQjtJQUN0QyxNQUFNLENBQUNTLEtBQUtDLE9BQU8sR0FBR1QsK0NBQVFBLENBQU07SUFDcEMsTUFBTSxDQUFDVSxTQUFTQyxXQUFXLEdBQUdYLCtDQUFRQSxDQUFRLEVBQUU7SUFDaEQsTUFBTSxDQUFDWSxVQUFVQyxZQUFZLEdBQUdiLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU1jLGVBQWVmLDZDQUFNQSxDQUFNO0lBQ2pDLE1BQU0sRUFBRWdCLFFBQVEsRUFBRSxHQUFHZCxpRUFBV0E7SUFDaEMsTUFBTSxDQUFDSSxVQUFVVyxZQUFZLEdBQUdoQiwrQ0FBUUEsQ0FBQ00sZ0JBQWdCLFlBQVksa0JBQWtCO0lBRXZGLGlDQUFpQztJQUNqQ1IsZ0RBQVNBLENBQUM7UUFDUm1CLFFBQVFDLEdBQUcsQ0FBQyx3Q0FBd0NIO0lBQ3RELEdBQUc7UUFBQ0E7S0FBUztJQUViLHFDQUFxQztJQUNyQ2pCLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSVEsZ0JBQWdCQSxpQkFBaUJELFVBQVU7WUFDN0NZLFFBQVFDLEdBQUcsQ0FBQyx5Q0FBeUNaO1lBQ3JEVSxZQUFZVjtRQUNkO0lBQ0YsR0FBRztRQUFDQTtRQUFjRDtLQUFTO0lBRTNCUCxnREFBU0EsQ0FBQztRQUNSZSxZQUFZO0lBQ2QsR0FBRyxFQUFFO0lBRUxmLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDYyxZQUFZLENBQUNMLE9BQU9ZLE9BQU8sSUFBSVgsS0FBSztRQUV6QyxJQUFJWSxZQUFZO1FBQ2hCLElBQUlDLGNBQW1CO1FBQ3ZCLElBQUlDLGFBQWEsSUFBSUM7UUFFckIs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QyxVQUFVO1lBQ1ZDLGVBQWU7UUFDakI7UUFDQSxPQUFPcEIsTUFBTSxDQUFDaEUsS0FBSyxJQUFJO0lBQ3pCO0lBRUEsSUFBSSxDQUFDdkYsVUFBVTtRQUNiLHFCQUNFLDhEQUFDMkQ7WUFBSStCLFdBQVU7c0JBQ2IsNEVBQUMvQjtnQkFBSStCLFdBQVU7O2tDQUNiLDhEQUFDa0Y7d0JBQUVsRixXQUFVOzs7Ozs7a0NBQ2IsOERBQUNtRjt3QkFBRW5GLFdBQVU7a0NBQWdCOzs7Ozs7Ozs7Ozs7Ozs7OztJQUlyQztJQUVBLHFCQUNFLDhEQUFDL0I7UUFDQytCLFdBQVU7UUFDVjdELE9BQU87WUFBRUMsUUFBUTtRQUFFO2tCQUVuQiw0RUFBQzZCO1lBQ0NtSCxLQUFLbkw7WUFDTCtGLFdBQVU7WUFDVjdELE9BQU87Z0JBQUVDLFFBQVE7WUFBRTs7Ozs7Ozs7Ozs7QUFJM0I7R0FobEJNeEM7O1FBVWlCRCw2REFBV0E7OztLQVY1QkM7QUFrbEJOLCtEQUFlQSxjQUFjQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvSW50ZXJhY3RpdmVNYXAudHN4PzVhNWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY29tcG9uZW50cy9JbnRlcmFjdGl2ZU1hcC50c3hcblwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZUxhbmd1YWdlIH0gZnJvbSBcIkAvbGliL0xhbmd1YWdlQ29udGV4dFwiO1xuXG4vLyBEZWZpbmUgdHlwZXNcbmludGVyZmFjZSBCdXNpbmVzcyB7XG4gIGlkOiBudW1iZXI7XG4gIG5hbWU6IHN0cmluZztcbiAgYWRkcmVzczogc3RyaW5nO1xuICBsYXQ6IG51bWJlcjtcbiAgbG5nOiBudW1iZXI7XG4gIHR5cGU6IHN0cmluZztcbiAgY2F0ZWdvcnk6IHN0cmluZztcbiAgcGhvbmU/OiBzdHJpbmc7XG4gIGVtYWlsPzogc3RyaW5nO1xufVxuXG5pbnRlcmZhY2UgTWFwUHJvcHMge1xuICBidXNpbmVzc2VzOiBCdXNpbmVzc1tdO1xuICBvbkJ1c2luZXNzQ2xpY2s6IChidXNpbmVzczogQnVzaW5lc3MpID0+IHZvaWQ7XG4gIG1hcFN0eWxlPzogc3RyaW5nOyAvLyDYpdi22KfZgdipIHByb3Ag2YTZhNmAIHN0eWxlXG59XG5cbmNvbnN0IEludGVyYWN0aXZlTWFwID0gKHtcbiAgYnVzaW5lc3NlcyxcbiAgb25CdXNpbmVzc0NsaWNrLFxuICBtYXBTdHlsZTogcHJvcE1hcFN0eWxlLFxufTogTWFwUHJvcHMpID0+IHtcbiAgY29uc3QgbWFwUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW21hcCwgc2V0TWFwXSA9IHVzZVN0YXRlPGFueT4obnVsbCk7XG4gIGNvbnN0IFttYXJrZXJzLCBzZXRNYXJrZXJzXSA9IHVzZVN0YXRlPGFueVtdPihbXSk7XG4gIGNvbnN0IFtpc0NsaWVudCwgc2V0SXNDbGllbnRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB0aWxlTGF5ZXJSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgY29uc3QgeyBsYW5ndWFnZSB9ID0gdXNlTGFuZ3VhZ2UoKTtcbiAgY29uc3QgW21hcFN0eWxlLCBzZXRNYXBTdHlsZV0gPSB1c2VTdGF0ZShwcm9wTWFwU3R5bGUgfHwgXCJzdHJlZXRzXCIpOyAvLyDZhdiq2LrZitixINmE2YTZgCBzdHlsZVxuXG4gIC8vIERlYnVnIGxvZyBmb3IgbGFuZ3VhZ2UgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiSW50ZXJhY3RpdmVNYXA6IExhbmd1YWdlIGNoYW5nZWQgdG86XCIsIGxhbmd1YWdlKTtcbiAgfSwgW2xhbmd1YWdlXSk7XG5cbiAgLy8gVXBkYXRlIG1hcCBzdHlsZSB3aGVuIHByb3AgY2hhbmdlc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wTWFwU3R5bGUgJiYgcHJvcE1hcFN0eWxlICE9PSBtYXBTdHlsZSkge1xuICAgICAgY29uc29sZS5sb2coXCJJbnRlcmFjdGl2ZU1hcDogTWFwIHN0eWxlIGNoYW5nZWQgdG86XCIsIHByb3BNYXBTdHlsZSk7XG4gICAgICBzZXRNYXBTdHlsZShwcm9wTWFwU3R5bGUpO1xuICAgIH1cbiAgfSwgW3Byb3BNYXBTdHlsZSwgbWFwU3R5bGVdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldElzQ2xpZW50KHRydWUpO1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzQ2xpZW50IHx8ICFtYXBSZWYuY3VycmVudCB8fCBtYXApIHJldHVybjtcblxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xuICAgIGxldCBtYXBJbnN0YW5jZTogYW55ID0gbnVsbDtcbiAgICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgIC8vIER5bmFtaWMgaW1wb3J0INmE2YAgTGVhZmxldFxuICAgIGNvbnN0IGluaXRNYXAgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBMID0gYXdhaXQgaW1wb3J0KFwibGVhZmxldFwiKTtcbiAgICAgICAgLy8gTG9hZCBNYXBUaWxlciBMZWFmbGV0IFNESyB0byBhdWdtZW50IEwgd2l0aCBtYXB0aWxlckxheWVyIChmb3IgdmVjdG9yIG11bHRpbGluZ3VhbCB0aWxlcylcbiAgICAgICAgYXdhaXQgaW1wb3J0KFwiQG1hcHRpbGVyL2xlYWZsZXQtbWFwdGlsZXJzZGtcIik7XG5cbiAgICAgICAgaWYgKCFpc01vdW50ZWQgfHwgIW1hcFJlZi5jdXJyZW50IHx8IGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcblxuICAgICAgICAvLyDYpdi12YTYp9itINmF2LTZg9mE2Kkg2KfZhNmAIGRlZmF1bHQgbWFya2Vyc1xuICAgICAgICBkZWxldGUgKEwuSWNvbi5EZWZhdWx0LnByb3RvdHlwZSBhcyBhbnkpLl9nZXRJY29uVXJsO1xuICAgICAgICBMLkljb24uRGVmYXVsdC5tZXJnZU9wdGlvbnMoe1xuICAgICAgICAgIGljb25SZXRpbmFVcmw6XG4gICAgICAgICAgICBcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMS43LjEvaW1hZ2VzL21hcmtlci1pY29uLTJ4LnBuZ1wiLFxuICAgICAgICAgIGljb25Vcmw6XG4gICAgICAgICAgICBcImh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xlYWZsZXQvMS43LjEvaW1hZ2VzL21hcmtlci1pY29uLnBuZ1wiLFxuICAgICAgICAgIHNoYWRvd1VybDpcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvbGVhZmxldC8xLjcuMS9pbWFnZXMvbWFya2VyLXNoYWRvdy5wbmdcIixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBtYXAgLSDZhtio2K/YoyDYqNmF2YbYt9mC2Kkg2KfZhNiz2LnZiNiv2YrYqVxuICAgICAgICBtYXBJbnN0YW5jZSA9IEwubWFwKG1hcFJlZi5jdXJyZW50ISkuc2V0VmlldyhbMjMuODg1OSwgNDUuMDc5Ml0sIDYpO1xuXG4gICAgICAgIGlmICghaXNNb3VudGVkIHx8IGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICBtYXBJbnN0YW5jZS5yZW1vdmUoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGb3JjZSBsb3cgei1pbmRleCBmb3IgYWxsIG1hcCBwYW5lcyBzbyBpdCBuZXZlciBvdmVybGFwcyBvdGhlciBVSVxuICAgICAgICBjb25zdCBwYW5lcyA9IG1hcEluc3RhbmNlLmdldFBhbmVzKCk7XG4gICAgICAgIGlmIChwYW5lcz8ubWFwUGFuZSkgcGFuZXMubWFwUGFuZS5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgaWYgKHBhbmVzPy50aWxlUGFuZSkgcGFuZXMudGlsZVBhbmUuc3R5bGUuekluZGV4ID0gXCIwXCI7XG4gICAgICAgIGlmIChwYW5lcz8ub3ZlcmxheVBhbmUpIHBhbmVzLm92ZXJsYXlQYW5lLnN0eWxlLnpJbmRleCA9IFwiMFwiO1xuICAgICAgICBpZiAocGFuZXM/LnNoYWRvd1BhbmUpIHBhbmVzLnNoYWRvd1BhbmUuc3R5bGUuekluZGV4ID0gXCIwXCI7XG4gICAgICAgIGlmIChwYW5lcz8ubWFya2VyUGFuZSkgcGFuZXMubWFya2VyUGFuZS5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgaWYgKHBhbmVzPy5wb3B1cFBhbmUpIHBhbmVzLnBvcHVwUGFuZS5zdHlsZS56SW5kZXggPSBcIjBcIjtcbiAgICAgICAgaWYgKChwYW5lcyBhcyBhbnkpICYmIChwYW5lcyBhcyBhbnkpLnRvb2x0aXBQYW5lKVxuICAgICAgICAgIChwYW5lcyBhcyBhbnkpLnRvb2x0aXBQYW5lLnN0eWxlLnpJbmRleCA9IFwiMVwiO1xuICAgICAgICBjb25zdCBjb250cm9sQ29udGFpbmVyID0gbWFwSW5zdGFuY2VcbiAgICAgICAgICAuZ2V0Q29udGFpbmVyKClcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyXCIpIGFzIEhUTUxFbGVtZW50IHwgbnVsbDtcbiAgICAgICAgaWYgKGNvbnRyb2xDb250YWluZXIpIGNvbnRyb2xDb250YWluZXIuc3R5bGUuekluZGV4ID0gXCIwXCI7XG5cbiAgICAgICAgLy8gQ2hvb3NlIHRpbGUgc291cmNlLiBQcmVmZXIgTWFwVGlsZXIgU0RLIGZvciBsYW5ndWFnZSBzd2l0Y2hpbmc7IGZhbGxiYWNrIHRvIE9TTS5cbiAgICAgICAgY29uc3QgbWFwVGlsZXJLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19NQVBUSUxFUl9LRVk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbCBNYXBUaWxlciBLZXkgZXhpc3RzOlwiLCAhIW1hcFRpbGVyS2V5KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJJbml0aWFsIE1hcFRpbGVyIEtleSBsZW5ndGg6XCIsIG1hcFRpbGVyS2V5Py5sZW5ndGggfHwgMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbCBsYW5ndWFnZTpcIiwgbGFuZ3VhZ2UpO1xuXG4gICAgICAgIGlmIChtYXBUaWxlcktleSkge1xuICAgICAgICAgIGNvbnN0IHsgTWFwdGlsZXJMYXllciB9ID0gYXdhaXQgaW1wb3J0KFxuICAgICAgICAgICAgXCJAbWFwdGlsZXIvbGVhZmxldC1tYXB0aWxlcnNka1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBpbml0aWFsTGFuZ3VhZ2UgPSBsYW5ndWFnZSA9PT0gXCJhclwiID8gXCJhclwiIDogXCJlblwiO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbCBNYXBUaWxlciBsYW5ndWFnZTpcIiwgaW5pdGlhbExhbmd1YWdlKTtcblxuICAgICAgICAgIGNvbnN0IGxheWVyID0gbmV3IE1hcHRpbGVyTGF5ZXIoe1xuICAgICAgICAgICAgYXBpS2V5OiBtYXBUaWxlcktleSxcbiAgICAgICAgICAgIHN0eWxlOiBtYXBTdHlsZSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiBpbml0aWFsTGFuZ3VhZ2UsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGlsZUxheWVyUmVmLmN1cnJlbnQgPSBsYXllcjtcbiAgICAgICAgICBpZiAoaXNNb3VudGVkKSB7XG4gICAgICAgICAgICBsYXllci5hZGRUbyhtYXBJbnN0YW5jZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHRpbGVVcmwgPSBcImh0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nXCI7XG4gICAgICAgICAgdGlsZUxheWVyUmVmLmN1cnJlbnQgPSBMLnRpbGVMYXllcih0aWxlVXJsLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbjpcbiAgICAgICAgICAgICAgJyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJyxcbiAgICAgICAgICAgIG1heFpvb206IDE4LFxuICAgICAgICAgICAgbWluWm9vbTogMywgLy8g2YbYs9mF2K0g2KjYp9mE2YAgem9vbSBvdXQg2KPZg9ir2LFcbiAgICAgICAgICB9KS5hZGRUbyhtYXBJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBjb250cm9sIHRvIHJlc2V0IHRvIFNhdWRpIEFyYWJpYVxuICAgICAgICBjb25zdCBSZXNldENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKHtcbiAgICAgICAgICBvbkFkZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc3QgZGl2ID0gTC5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLCBcInJlc2V0LWNvbnRyb2xcIik7XG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxuICAgICAgICA8YnV0dG9uIHN0eWxlPVwiXG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzNCODJGNjtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIGNvbG9yOiAjM0I4MkY2O1xuICAgICAgICAgIGJveC1zaGFkb3c6IDAgMnB4IDhweCByZ2JhKDAsMCwwLDAuMik7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnM7XG4gICAgICAgIFwiXG4gICAgICAgIG9ubW91c2VvdmVyPVwidGhpcy5zdHlsZS5iYWNrZ3JvdW5kPScjZjBmOWZmJzsgdGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEuMDUpJ1wiXG4gICAgICAgIG9ubW91c2VvdXQ9XCJ0aGlzLnN0eWxlLmJhY2tncm91bmQ9J3doaXRlJzsgdGhpcy5zdHlsZS50cmFuc2Zvcm09J3NjYWxlKDEpJ1wiXG4gICAgICAgIHRpdGxlPVwiQmFjayB0byBTYXVkaSBBcmFiaWFcIj5cbiAgICAgICAgICDwn4e48J+HplxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIGA7XG4gICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgbWFwSW5zdGFuY2Uuc2V0VmlldyhbMjMuODg1OSwgNDUuMDc5Ml0sIDYpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBkaXY7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3ByaWdodFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCByZXNldENvbnRyb2wgPSBuZXcgUmVzZXRDb250cm9sKCk7XG4gICAgICAgIHJlc2V0Q29udHJvbC5hZGRUbyhtYXBJbnN0YW5jZSk7XG5cbiAgICAgICAgaWYgKGlzTW91bnRlZCkge1xuICAgICAgICAgIHNldE1hcChtYXBJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbml0aWFsaXppbmcgbWFwOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGluaXRNYXAoKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc01vdW50ZWQgPSBmYWxzZTtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIGlmIChtYXBJbnN0YW5jZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIG1hcEluc3RhbmNlLnJlbW92ZSgpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZW1vdmluZyBtYXA6XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH0sIFtpc0NsaWVudF0pO1xuXG4gIC8vIFVwZGF0ZSBiYXNlIHRpbGVzIHdoZW4gbGFuZ3VhZ2UgY2hhbmdlcyAoZm9yIE1hcFRpbGVyKS4gSWYgbm8ga2V5LCBPU00gcmVtYWlucyB1bmNoYW5nZWQuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFtYXAgfHwgIWlzQ2xpZW50KSByZXR1cm47XG5cbiAgICBsZXQgaXNNb3VudGVkID0gdHJ1ZTtcbiAgICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgIGNvbnN0IHVwZGF0ZVRpbGVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgTCA9IGF3YWl0IGltcG9ydChcImxlYWZsZXRcIik7XG4gICAgICAgIGF3YWl0IGltcG9ydChcIkBtYXB0aWxlci9sZWFmbGV0LW1hcHRpbGVyc2RrXCIpO1xuICAgICAgICBjb25zdCBtYXBUaWxlcktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX01BUFRJTEVSX0tFWTtcblxuICAgICAgICBpZiAoIWlzTW91bnRlZCB8fCAhbWFwIHx8IGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcblxuICAgICAgICAvLyBEZWJ1ZyBsb2cgZm9yIHByb2R1Y3Rpb25cbiAgICAgICAgY29uc29sZS5sb2coXCJNYXBUaWxlciBLZXkgZXhpc3RzOlwiLCAhIW1hcFRpbGVyS2V5KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJNYXBUaWxlciBLZXkgbGVuZ3RoOlwiLCBtYXBUaWxlcktleT8ubGVuZ3RoIHx8IDApO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkN1cnJlbnQgbGFuZ3VhZ2U6XCIsIGxhbmd1YWdlKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJMYW5ndWFnZSB0eXBlOlwiLCB0eXBlb2YgbGFuZ3VhZ2UpO1xuXG4gICAgICAgIGlmICghbWFwVGlsZXJLZXkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIE1hcFRpbGVyIGtleSwgdXNpbmcgT1NNIHRpbGVzXCIpO1xuICAgICAgICAgIHJldHVybjsgLy8gT1NNIGRvZXNuJ3Qgc3VwcG9ydCBsYW5ndWFnZSBzd2l0Y2hpbmdcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhZmVseSByZW1vdmUgb2xkIGxheWVyXG4gICAgICAgIGlmICh0aWxlTGF5ZXJSZWYuY3VycmVudCAmJiBtYXAgJiYgIWNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgbWFwLnJlbW92ZUxheWVyKHRpbGVMYXllclJlZi5jdXJyZW50KTtcbiAgICAgICAgICAgIHRpbGVMYXllclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBsYXllciBpcyBmdWxseSByZW1vdmVkIGJlZm9yZSBhZGRpbmcgbmV3IG9uZVxuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTApKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlbW92aW5nIHRpbGUgbGF5ZXI6XCIsIGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWlzTW91bnRlZCB8fCAhbWFwIHx8IGNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHJldHVybjtcblxuICAgICAgICBjb25zdCB7IE1hcHRpbGVyTGF5ZXIgfSA9IGF3YWl0IGltcG9ydChcIkBtYXB0aWxlci9sZWFmbGV0LW1hcHRpbGVyc2RrXCIpO1xuICAgICAgICBjb25zdCB0YXJnZXRMYW5ndWFnZSA9IGxhbmd1YWdlID09PSBcImFyXCIgPyBcImFyXCIgOiBcImVuXCI7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU2V0dGluZyBNYXBUaWxlciBsYW5ndWFnZSB0bzpcIiwgdGFyZ2V0TGFuZ3VhZ2UpO1xuXG4gICAgICAgIGNvbnN0IGxheWVyID0gbmV3IE1hcHRpbGVyTGF5ZXIoe1xuICAgICAgICAgIGFwaUtleTogbWFwVGlsZXJLZXksXG4gICAgICAgICAgc3R5bGU6IG1hcFN0eWxlLFxuICAgICAgICAgIGxhbmd1YWdlOiB0YXJnZXRMYW5ndWFnZSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGlzTW91bnRlZCAmJiBtYXAgJiYgIWNvbnRyb2xsZXIuc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgICB0aWxlTGF5ZXJSZWYuY3VycmVudCA9IGxheWVyO1xuICAgICAgICAgIGxheWVyLmFkZFRvKG1hcCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJUaWxlIHVwZGF0ZSB3YXMgY2FuY2VsbGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciB1cGRhdGluZyB0aWxlczpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIERlYm91bmNlIHRpbGUgdXBkYXRlcyB0byBwcmV2ZW50IHJhcGlkIGNoYW5nZXNcbiAgICBjb25zdCB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdXBkYXRlVGlsZXMoKTtcbiAgICB9LCAzMDApO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICB9O1xuICB9LCBbbGFuZ3VhZ2UsIG1hcCwgaXNDbGllbnQsIG1hcFN0eWxlXSk7XG5cbiAgLy8gVXBkYXRlIG1hcmtlcnMgd2hlbiBidXNpbmVzc2VzIGNoYW5nZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghbWFwIHx8ICFpc0NsaWVudCkgcmV0dXJuO1xuXG4gICAgY29uc3QgdXBkYXRlTWFya2VycyA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IEwgPSBhd2FpdCBpbXBvcnQoXCJsZWFmbGV0XCIpO1xuXG4gICAgICAvLyBSZW1vdmUgZXhpc3RpbmcgbWFya2Vyc1xuICAgICAgbWFya2Vycy5mb3JFYWNoKChtYXJrZXIpID0+IG1hcmtlci5yZW1vdmVGcm9tKG1hcCkpO1xuICAgICAgY29uc3QgbmV3TWFya2VyczogYW55W10gPSBbXTtcblxuICAgICAgYnVzaW5lc3Nlcy5mb3JFYWNoKChidXNpbmVzcykgPT4ge1xuICAgICAgICBjb25zdCBtYXJrZXJDb2xvciA9IGdldEJ1c2luZXNzTWFya2VyQ29sb3IoYnVzaW5lc3MudHlwZSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGN1c3RvbSBtYXJrZXJcbiAgICAgICAgY29uc3QgY3VzdG9tSWNvbiA9IEwuZGl2SWNvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiBcImN1c3RvbS1tYXJrZXJcIixcbiAgICAgICAgICBodG1sOiBgXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiXG4gICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7bWFya2VyQ29sb3J9O1xuICAgICAgICAgICAgICB3aWR0aDogMjBweDtcbiAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgIGJvcmRlcjogM3B4IHNvbGlkIHdoaXRlO1xuICAgICAgICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICBcIj48L2Rpdj5cbiAgICAgICAgICBgLFxuICAgICAgICAgIGljb25TaXplOiBbMjAsIDIwXSxcbiAgICAgICAgICBpY29uQW5jaG9yOiBbMTAsIDEwXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW2J1c2luZXNzLmxhdCwgYnVzaW5lc3MubG5nXSwge1xuICAgICAgICAgIGljb246IGN1c3RvbUljb24sXG4gICAgICAgICAgdGl0bGU6IGJ1c2luZXNzLm5hbWUsXG4gICAgICAgIH0pLmFkZFRvKG1hcCk7XG5cbiAgICAgICAgLy8gQnVpbGQgaG92ZXIgdG9vbHRpcCBjb250ZW50IHdpdGggdHJhbnNsYXRpb25zXG4gICAgICAgIGNvbnN0IGlzUnRsID0gbGFuZ3VhZ2UgPT09IFwiYXJcIjtcblxuICAgICAgICAvLyBUcmFuc2xhdGlvbnMgb2JqZWN0XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgICAgICAgICBlbjoge1xuICAgICAgICAgICAgYnVzaW5lc3NUeXBlOiBcIkJ1c2luZXNzIFR5cGVcIixcbiAgICAgICAgICAgIGFkZHJlc3M6IFwiQWRkcmVzc1wiLFxuICAgICAgICAgICAgcGhvbmU6IFwiUGhvbmVcIixcbiAgICAgICAgICAgIGVtYWlsOiBcIkVtYWlsXCIsXG4gICAgICAgICAgICBjYXRlZ29yeTogXCJDYXRlZ29yeVwiLFxuICAgICAgICAgICAgc3RhdHVzOiBcIlN0YXR1c1wiLFxuICAgICAgICAgICAgdmVyaWZpZWQ6IFwiVmVyaWZpZWRcIixcbiAgICAgICAgICAgIHBlbmRpbmc6IFwiUGVuZGluZ1wiLFxuICAgICAgICAgICAgcmF0aW5nOiBcIlJhdGluZ1wiLFxuICAgICAgICAgICAgcmV2aWV3czogXCJSZXZpZXdzXCIsXG4gICAgICAgICAgICBlc3RhYmxpc2hlZDogXCJFc3RhYmxpc2hlZFwiLFxuICAgICAgICAgICAgZW1wbG95ZWVzOiBcIkVtcGxveWVlc1wiLFxuICAgICAgICAgICAgd29ya2luZ0hvdXJzOiBcIldvcmtpbmcgSG91cnNcIixcbiAgICAgICAgICAgIHdlYnNpdGU6IFwiV2Vic2l0ZVwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiRGVzY3JpcHRpb25cIixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFyOiB7XG4gICAgICAgICAgICBidXNpbmVzc1R5cGU6IFwi2YbZiNi5INin2YTZhti02KfYt1wiLFxuICAgICAgICAgICAgYWRkcmVzczogXCLYp9mE2LnZhtmI2KfZhlwiLFxuICAgICAgICAgICAgcGhvbmU6IFwi2KfZhNmH2KfYqtmBXCIsXG4gICAgICAgICAgICBlbWFpbDogXCLYp9mE2KjYsdmK2K8g2KfZhNil2YTZg9iq2LHZiNmG2YpcIixcbiAgICAgICAgICAgIGNhdGVnb3J5OiBcItin2YTZgdim2KlcIixcbiAgICAgICAgICAgIHN0YXR1czogXCLYp9mE2K3Yp9mE2KlcIixcbiAgICAgICAgICAgIHZlcmlmaWVkOiBcItmF2YjYq9mCXCIsXG4gICAgICAgICAgICBwZW5kaW5nOiBcItmB2Yog2KfZhNin2YbYqti42KfYsVwiLFxuICAgICAgICAgICAgcmF0aW5nOiBcItin2YTYqtmC2YrZitmFXCIsXG4gICAgICAgICAgICByZXZpZXdzOiBcItin2YTZhdix2KfYrNi52KfYqlwiLFxuICAgICAgICAgICAgZXN0YWJsaXNoZWQ6IFwi2KrYo9iz2LMg2YHZilwiLFxuICAgICAgICAgICAgZW1wbG95ZWVzOiBcItin2YTZhdmI2LjZgdmK2YZcIixcbiAgICAgICAgICAgIHdvcmtpbmdIb3VyczogXCLYs9in2LnYp9iqINin2YTYudmF2YRcIixcbiAgICAgICAgICAgIHdlYnNpdGU6IFwi2KfZhNmF2YjZgti5INin2YTYpdmE2YPYqtix2YjZhtmKXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCLYp9mE2YjYtdmBXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCB0ID1cbiAgICAgICAgICB0cmFuc2xhdGlvbnNbbGFuZ3VhZ2UgYXMga2V5b2YgdHlwZW9mIHRyYW5zbGF0aW9uc10gfHxcbiAgICAgICAgICB0cmFuc2xhdGlvbnMuZW47XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgc29tZSByZWFsaXN0aWMgYnVzaW5lc3MgZGF0YVxuICAgICAgICBjb25zdCBidXNpbmVzc0RhdGEgPSB7XG4gICAgICAgICAgcGhvbmU6XG4gICAgICAgICAgICBidXNpbmVzcy5waG9uZSB8fFxuICAgICAgICAgICAgYCs5NjYgJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA5MDAwMDAwMDAwKSArIDEwMDAwMDAwMDB9YCxcbiAgICAgICAgICBlbWFpbDpcbiAgICAgICAgICAgIGJ1c2luZXNzLmVtYWlsIHx8XG4gICAgICAgICAgICBgJHtidXNpbmVzcy5uYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCBcIlwiKX1AY29tcGFueS5jb21gLFxuICAgICAgICAgIHJhdGluZzogKE1hdGgucmFuZG9tKCkgKiAyICsgMykudG9GaXhlZCgxKSwgLy8gMy4wIHRvIDUuMFxuICAgICAgICAgIHJldmlld3M6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIwMCkgKyAxMCxcbiAgICAgICAgICB3b3JraW5nSG91cnM6XG4gICAgICAgICAgICBsYW5ndWFnZSA9PT0gXCJhclwiID8gXCI4OjAwINi1IC0gNjowMCDZhVwiIDogXCI4OjAwIEFNIC0gNjowMCBQTVwiLFxuICAgICAgICAgIHdlYnNpdGU6IGB3d3cuJHtidXNpbmVzcy5uYW1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzKy9nLCBcIlwiKX0uY29tYCxcbiAgICAgICAgICBzdGF0dXM6IE1hdGgucmFuZG9tKCkgPiAwLjMgPyBcInZlcmlmaWVkXCIgOiBcInBlbmRpbmdcIixcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIGxhbmd1YWdlID09PSBcImFyXCJcbiAgICAgICAgICAgICAgPyBcIti02LHZg9ipINix2KfYptiv2Kkg2YHZiiDZhdis2KfZhNmH2Kcg2KrZgtiv2YUg2K7Yr9mF2KfYqiDYudin2YTZitipINin2YTYrNmI2K/YqSDZhNi52YXZhNin2KbZh9inXCJcbiAgICAgICAgICAgICAgOiBcIkxlYWRpbmcgY29tcGFueSBpbiBpdHMgZmllbGQgcHJvdmlkaW5nIGhpZ2gtcXVhbGl0eSBzZXJ2aWNlcyB0byBjbGllbnRzXCIsXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgdG9vbHRpcENvbnRlbnQgPSBgXG4gICAgICAgICAgPGRpdiBkaXI9XCIke1xuICAgICAgICAgICAgaXNSdGwgPyBcInJ0bFwiIDogXCJsdHJcIlxuICAgICAgICAgIH1cIiBzdHlsZT1cImJhY2tncm91bmQ6I2ZmZjtib3JkZXI6MXB4IHNvbGlkICNlNWU3ZWI7Ym9yZGVyLXJhZGl1czoxMnB4O3BhZGRpbmc6MTBweCAxMnB4O21pbi13aWR0aDo0MDBweDttYXgtd2lkdGg6NTAwcHg7Ym94LXNoYWRvdzowIDhweCAyMHB4IHJnYmEoMCwwLDAsMC4xMik7JHtcbiAgICAgICAgICBpc1J0bCA/IFwiZGlyZWN0aW9uOnJ0bDt0ZXh0LWFsaWduOnJpZ2h0O1wiIDogXCJcIlxuICAgICAgICB9XCI+XG4gICAgICAgICAgICA8IS0tIEhlYWRlciBSb3cgLS0+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW4tYm90dG9tOjhweDske1xuICAgICAgICAgICAgICBpc1J0bCA/IFwiZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7XCIgOiBcIlwiXG4gICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgIDxoMyBzdHlsZT1cImZvbnQtd2VpZ2h0OjcwMDtjb2xvcjojMTExODI3O2ZvbnQtc2l6ZToxNHB4O21hcmdpbjowO1wiPiR7XG4gICAgICAgICAgICAgICAgYnVzaW5lc3MubmFtZVxuICAgICAgICAgICAgICB9PC9oMz5cbiAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJwYWRkaW5nOjNweCA2cHg7Ym9yZGVyLXJhZGl1czoxMnB4O2JhY2tncm91bmQ6JHtcbiAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEuc3RhdHVzID09PSBcInZlcmlmaWVkXCIgPyBcIiMxMEI5ODFcIiA6IFwiI0Y1OUUwQlwiXG4gICAgICAgICAgICAgIH07Y29sb3I6I2ZmZjtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDtcIj5cbiAgICAgICAgICAgICAgICAke2J1c2luZXNzRGF0YS5zdGF0dXMgPT09IFwidmVyaWZpZWRcIiA/IHQudmVyaWZpZWQgOiB0LnBlbmRpbmd9XG4gICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8IS0tIE1haW4gQ29udGVudCBSb3cgLS0+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTpmbGV4O2dhcDoxMnB4O2FsaWduLWl0ZW1zOmZsZXgtc3RhcnQ7JHtcbiAgICAgICAgICAgICAgaXNSdGwgPyBcImZsZXgtZGlyZWN0aW9uOnJvdy1yZXZlcnNlO1wiIDogXCJcIlxuICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICA8IS0tIExlZnQgQ29sdW1uIC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZmxleDoxO21pbi13aWR0aDowO1wiPlxuICAgICAgICAgICAgICAgIDwhLS0gQnVzaW5lc3MgVHlwZSAmIENhdGVnb3J5IC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJkaXNwbGF5OmZsZXg7Z2FwOjZweDttYXJnaW4tYm90dG9tOjZweDske1xuICAgICAgICAgICAgICAgICAgaXNSdGwgPyBcImZsZXgtZGlyZWN0aW9uOnJvdy1yZXZlcnNlO1wiIDogXCJcIlxuICAgICAgICAgICAgICAgIH1cIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwicGFkZGluZzozcHggNnB4O2JvcmRlci1yYWRpdXM6OHB4O2JhY2tncm91bmQ6IzNCODJGNjtjb2xvcjojZmZmO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NjAwO1wiPlxuICAgICAgICAgICAgICAgICAgICAke2J1c2luZXNzLnR5cGV9XG4gICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICA8c3BhbiBzdHlsZT1cInBhZGRpbmc6M3B4IDZweDtib3JkZXItcmFkaXVzOjhweDtiYWNrZ3JvdW5kOiM2QjcyODA7Y29sb3I6I2ZmZjtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDtcIj5cbiAgICAgICAgICAgICAgICAgICAgJHtidXNpbmVzcy5jYXRlZ29yeX1cbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDwhLS0gQWRkcmVzcyAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTo2cHg7XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzZCNzI4MDtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjFweDtcIj4ke1xuICAgICAgICAgICAgICAgICAgICB0LmFkZHJlc3NcbiAgICAgICAgICAgICAgICAgIH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojMzc0MTUxO2ZvbnQtc2l6ZToxMHB4O2xpbmUtaGVpZ2h0OjEuMjtcIj4ke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzcy5hZGRyZXNzXG4gICAgICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8IS0tIENvbnRhY3QgSW5mbyAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTo2cHg7XCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzZCNzI4MDtmb250LXNpemU6OXB4O2ZvbnQtd2VpZ2h0OjYwMDttYXJnaW4tYm90dG9tOjFweDtcIj4ke1xuICAgICAgICAgICAgICAgICAgICB0LnBob25lXG4gICAgICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiY29sb3I6IzM3NDE1MTtmb250LXNpemU6OXB4O1wiPiR7XG4gICAgICAgICAgICAgICAgICAgIGJ1c2luZXNzRGF0YS5waG9uZVxuICAgICAgICAgICAgICAgICAgfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8IS0tIFJpZ2h0IENvbHVtbiAtLT5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImZsZXg6MTttaW4td2lkdGg6MDtcIj5cbiAgICAgICAgICAgICAgICA8IS0tIFJhdGluZyAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtnYXA6NHB4O21hcmdpbi1ib3R0b206NnB4OyR7XG4gICAgICAgICAgICAgICAgICBpc1J0bCA/IFwiZmxleC1kaXJlY3Rpb246cm93LXJldmVyc2U7XCIgOiBcIlwiXG4gICAgICAgICAgICAgICAgfVwiPlxuICAgICAgICAgICAgICAgICAgPHNwYW4gc3R5bGU9XCJjb2xvcjojRjU5RTBCO2ZvbnQtc2l6ZToxMHB4O1wiPuKtkDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6IzM3NDE1MTtmb250LXNpemU6MTBweDtmb250LXdlaWdodDo2MDA7XCI+JHtcbiAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NEYXRhLnJhdGluZ1xuICAgICAgICAgICAgICAgICAgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIHN0eWxlPVwiY29sb3I6IzZCNzI4MDtmb250LXNpemU6OHB4O1wiPigke1xuICAgICAgICAgICAgICAgICAgICBidXNpbmVzc0RhdGEucmV2aWV3c1xuICAgICAgICAgICAgICAgICAgfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8IS0tIEVtYWlsIC0tPlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjZweDtcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojNkI3MjgwO2ZvbnQtc2l6ZTo5cHg7Zm9udC13ZWlnaHQ6NjAwO21hcmdpbi1ib3R0b206MXB4O1wiPiR7XG4gICAgICAgICAgICAgICAgICAgIHQuZW1haWxcbiAgICAgICAgICAgICAgICAgIH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojMzc0MTUxO2ZvbnQtc2l6ZTo5cHg7XCI+JHtcbiAgICAgICAgICAgICAgICAgICAgYnVzaW5lc3NEYXRhLmVtYWlsXG4gICAgICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8IS0tIEFkZGl0aW9uYWwgSW5mbyAtLT5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwiZGlzcGxheTpmbGV4O2dhcDo4cHg7JHtcbiAgICAgICAgICAgICAgICAgIGlzUnRsID8gXCJmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZTtcIiA6IFwiXCJcbiAgICAgICAgICAgICAgICB9XCI+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPCEtLSBXb3JraW5nIEhvdXJzIFJvdyAtLT5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW4tdG9wOjZweDtwYWRkaW5nLXRvcDo2cHg7Ym9yZGVyLXRvcDoxcHggc29saWQgI2YzZjRmNjtcIj5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImNvbG9yOiM2QjcyODA7Zm9udC1zaXplOjlweDtmb250LXdlaWdodDo2MDA7bWFyZ2luLWJvdHRvbToycHg7XCI+JHtcbiAgICAgICAgICAgICAgICB0LndvcmtpbmdIb3Vyc1xuICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJjb2xvcjojMzc0MTUxO2ZvbnQtc2l6ZToxMHB4O1wiPiR7XG4gICAgICAgICAgICAgICAgYnVzaW5lc3NEYXRhLndvcmtpbmdIb3Vyc1xuICAgICAgICAgICAgICB9PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgbWFya2VyLmJpbmRUb29sdGlwKHRvb2x0aXBDb250ZW50LCB7XG4gICAgICAgICAgZGlyZWN0aW9uOiBcInRvcFwiLFxuICAgICAgICAgIG9mZnNldDogWzAsIC0xMF0sIC8vINmF2YjYrdivINmE2YTYutiq2YrZhlxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgcGVybWFuZW50OiBmYWxzZSxcbiAgICAgICAgICBzdGlja3k6IHRydWUsXG4gICAgICAgICAgaW50ZXJhY3RpdmU6IHRydWUsXG4gICAgICAgICAgY2xhc3NOYW1lOiBcImxlYWZsZXQtYnVzaW5lc3MtdG9vbHRpcFwiLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBObyBidXR0b24gaGFuZGxlcnMgbmVlZGVkIHNpbmNlIHdlIHJlbW92ZWQgdGhlIGJ1dHRvbnNcblxuICAgICAgICAvLyDZhdiq2Lrvv73vv73Ysdin2Kog2YTZhNiq2K3Zg9mFINmB2Yog2YHYqtitINmI2KXYutmE2KfZgiDYp9mE2YAgdG9vbHRpcFxuICAgICAgICBsZXQgaXNUb29sdGlwT3BlbiA9IGZhbHNlO1xuICAgICAgICBsZXQgY2xvc2VUaW1lb3V0OiBOb2RlSlMuVGltZW91dDtcbiAgICAgICAgbGV0IGlzSG92ZXJpbmdUb29sdGlwID0gZmFsc2U7XG4gICAgICAgIGxldCBpc0hvdmVyaW5nTWFya2VyID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSGFuZGxlIHRvb2x0aXAgZXZlbnRzXG4gICAgICAgIG1hcmtlci5vbihcInRvb2x0aXBvcGVuXCIsIChlKSA9PiB7XG4gICAgICAgICAgaXNUb29sdGlwT3BlbiA9IHRydWU7XG4gICAgICAgICAgY29uc3QgdG9vbHRpcCA9IGUudG9vbHRpcDtcbiAgICAgICAgICBjb25zdCB0b29sdGlwRWxlbWVudCA9IHRvb2x0aXAuZ2V0RWxlbWVudCgpO1xuXG4gICAgICAgICAgaWYgKHRvb2x0aXBFbGVtZW50KSB7XG4gICAgICAgICAgICAvLyBObyBidXR0b24gZXZlbnQgbGlzdGVuZXJzIG5lZWRlZCBzaW5jZSB3ZSByZW1vdmVkIHRoZSBidXR0b25zXG5cbiAgICAgICAgICAgIC8vINmF2YbYuSDYpdi62YTYp9mCINin2YTZgCB0b29sdGlwINi52YbYryBob3ZlciDYudmE2YrZh1xuICAgICAgICAgICAgdG9vbHRpcEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICBpc0hvdmVyaW5nVG9vbHRpcCA9IHRydWU7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVvdXQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRvb2x0aXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgaXNIb3ZlcmluZ1Rvb2x0aXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgLy8g2KXYutmE2KfZgiDYp9mE2YAgdG9vbHRpcCDYqNi52K8g2YXYutin2K/YsdipINin2YTZhdin2YjYsyDYqNmB2KrYsdipINmC2LXZitix2Kkg2YHZgti3INil2LDYpyDZhNmFINmG2YPZhiDZhmhvdmVyINi52YTZiSDYp9mE2YAgbWFya2VyXG4gICAgICAgICAgICAgIGNsb3NlVGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaXNIb3ZlcmluZ1Rvb2x0aXAgJiYgIWlzSG92ZXJpbmdNYXJrZXIgJiYgaXNUb29sdGlwT3Blbikge1xuICAgICAgICAgICAgICAgICAgbWFya2VyLmNsb3NlVG9vbHRpcCgpO1xuICAgICAgICAgICAgICAgICAgaXNUb29sdGlwT3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFya2VyLm9uKFwidG9vbHRpcGNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgICBpc1Rvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICAgICAgaXNIb3ZlcmluZ1Rvb2x0aXAgPSBmYWxzZTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQoY2xvc2VUaW1lb3V0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gSG92ZXIgYmVoYXZpb3IgLSDZhdmG2LfZgiDZhdit2LPZhiDZhNmF2YbYuSDYp9mE2YAgZmxpY2tlcmluZ1xuICAgICAgICBtYXJrZXIub24oXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgICAgIGlzSG92ZXJpbmdNYXJrZXIgPSB0cnVlO1xuICAgICAgICAgIGNsZWFyVGltZW91dChjbG9zZVRpbWVvdXQpO1xuICAgICAgICAgIGlmICghaXNUb29sdGlwT3Blbikge1xuICAgICAgICAgICAgbWFya2VyLm9wZW5Ub29sdGlwKCk7XG4gICAgICAgICAgICBvbkJ1c2luZXNzQ2xpY2soYnVzaW5lc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWFya2VyLm9uKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgIGlzSG92ZXJpbmdNYXJrZXIgPSBmYWxzZTtcbiAgICAgICAgICAvLyDYpdi62YTYp9mCINin2YTZgCB0b29sdGlwINio2LnYryDZhdi62KfYr9ix2Kkg2KfZhNmF2KfZiNizINio2YHYqtix2Kkg2YLYtdmK2LHYqSDZgdmC2Lcg2KXYsNinINmE2YUg2YbZg9mGINmGaG92ZXIg2LnZhNmJINin2YTZgCB0b29sdGlwXG4gICAgICAgICAgY2xvc2VUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWlzSG92ZXJpbmdUb29sdGlwICYmICFpc0hvdmVyaW5nTWFya2VyICYmIGlzVG9vbHRpcE9wZW4pIHtcbiAgICAgICAgICAgICAgbWFya2VyLmNsb3NlVG9vbHRpcCgpO1xuICAgICAgICAgICAgICBpc1Rvb2x0aXBPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWxzbyBoYW5kbGUgY2xpY2sgb24gbWFya2VyXG4gICAgICAgIG1hcmtlci5vbihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICBvbkJ1c2luZXNzQ2xpY2soYnVzaW5lc3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXdNYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRNYXJrZXJzKG5ld01hcmtlcnMpO1xuXG4gICAgICAvLyBGaXQgbWFwIHRvIHNob3cgYWxsIG1hcmtlcnMgaWYgdGhlcmUgYXJlIGFueVxuICAgICAgaWYgKGJ1c2luZXNzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBncm91cCA9IEwuZmVhdHVyZUdyb3VwKG5ld01hcmtlcnMpO1xuICAgICAgICBtYXAuZml0Qm91bmRzKGdyb3VwLmdldEJvdW5kcygpLCB7IHBhZGRpbmc6IFsyMCwgMjBdIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB1cGRhdGVNYXJrZXJzKCk7XG4gIH0sIFttYXAsIGlzQ2xpZW50LCBidXNpbmVzc2VzLCBvbkJ1c2luZXNzQ2xpY2ssIGxhbmd1YWdlXSk7XG5cbiAgY29uc3QgZ2V0QnVzaW5lc3NNYXJrZXJDb2xvciA9ICh0eXBlOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBjb2xvcnM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICBFbGVjdHJvbmljczogXCIjM0I4MkY2XCIsXG4gICAgICBBdXRvbW90aXZlOiBcIiNFRjQ0NDRcIixcbiAgICAgIEFncmljdWx0dXJlOiBcIiMxMEI5ODFcIixcbiAgICAgIEluZHVzdHJpYWw6IFwiI0Y1OUUwQlwiLFxuICAgICAgQ29uc3RydWN0aW9uOiBcIiNFQUIzMDhcIixcbiAgICAgIEZhc2hpb246IFwiI0VDNDg5OVwiLFxuICAgICAgTWVkaWNhbDogXCIjMTRCOEE2XCIsXG4gICAgICBGb29kOiBcIiNGOTczMTZcIixcbiAgICAgIFRlY2hub2xvZ3k6IFwiIzhCNUNGNlwiLFxuICAgICAgXCJPaWwmR2FzXCI6IFwiIzAwMDAwMFwiLFxuICAgICAgTWFyaW5lOiBcIiMxRDRFRDhcIixcbiAgICAgIE1pbmluZzogXCIjNzg3MTZDXCIsXG4gICAgICBUb3VyaXNtOiBcIiNGNDNGNUVcIixcbiAgICAgIFRleHRpbGVzOiBcIiNEOTQ2RUZcIixcbiAgICAgIEVxdWlwbWVudDogXCIjNDc1NTY5XCIsXG4gICAgICBNaWxpdGFyeTogXCIjMTY2NTM0XCIsXG4gICAgICBMb2dpc3RpY3M6IFwiIzFFNDBBRlwiLFxuICAgICAgUG9ydDogXCIjMUUzQThBXCIsXG4gICAgICBGaXNoaW5nOiBcIiM2MEE1RkFcIixcbiAgICAgIFBlcmZ1bWVzOiBcIiM3QzNBRURcIixcbiAgICAgIFBldHJvY2hlbWljYWw6IFwiIzM3NDE1MVwiLFxuICAgIH07XG4gICAgcmV0dXJuIGNvbG9yc1t0eXBlXSB8fCBcIiM2QjcyODBcIjtcbiAgfTtcblxuICBpZiAoIWlzQ2xpZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcm91bmRlZC0yeGwgaC02NCBzbTpoLTgwIG1kOmgtWzI4cmVtXSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgPGkgY2xhc3NOYW1lPVwicmktbWFwLXBpbi1saW5lIHRleHQtM3hsIHRleHQteWVsbG93LTUwMCBtYi0yIGFuaW1hdGUtcHVsc2VcIj48L2k+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPkxvYWRpbmcgbWFwLi4uPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIGNsYXNzTmFtZT1cImJnLWdyYXktMTAwIHJvdW5kZWQtMnhsIG92ZXJmbG93LWhpZGRlbiBzaGFkb3cteGwgaC02NCBzbTpoLTgwIG1kOmgtWzI4cmVtXSByZWxhdGl2ZSB6LTBcIlxuICAgICAgc3R5bGU9e3sgekluZGV4OiAwIH19XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICByZWY9e21hcFJlZn1cbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbCByb3VuZGVkLTJ4bCB6LTBcIlxuICAgICAgICBzdHlsZT17eyB6SW5kZXg6IDAgfX1cbiAgICAgIC8+XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGl2ZU1hcDtcbiJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUxhbmd1YWdlIiwiSW50ZXJhY3RpdmVNYXAiLCJidXNpbmVzc2VzIiwib25CdXNpbmVzc0NsaWNrIiwibWFwU3R5bGUiLCJwcm9wTWFwU3R5bGUiLCJtYXBSZWYiLCJtYXAiLCJzZXRNYXAiLCJtYXJrZXJzIiwic2V0TWFya2VycyIsImlzQ2xpZW50Iiwic2V0SXNDbGllbnQiLCJ0aWxlTGF5ZXJSZWYiLCJsYW5ndWFnZSIsInNldE1hcFN0eWxlIiwiY29uc29sZSIsImxvZyIsImN1cnJlbnQiLCJpc01vdW50ZWQiLCJtYXBJbnN0YW5jZSIsImNvbnRyb2xsZXIiLCJBYm9ydENvbnRyb2xsZXIiLCJpbml0TWFwIiwiTCIsInNpZ25hbCIsImFib3J0ZWQiLCJJY29uIiwiRGVmYXVsdCIsInByb3RvdHlwZSIsIl9nZXRJY29uVXJsIiwibWVyZ2VPcHRpb25zIiwiaWNvblJldGluYVVybCIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJzZXRWaWV3IiwicmVtb3ZlIiwicGFuZXMiLCJnZXRQYW5lcyIsIm1hcFBhbmUiLCJzdHlsZSIsInpJbmRleCIsInRpbGVQYW5lIiwib3ZlcmxheVBhbmUiLCJzaGFkb3dQYW5lIiwibWFya2VyUGFuZSIsInBvcHVwUGFuZSIsInRvb2x0aXBQYW5lIiwiY29udHJvbENvbnRhaW5lciIsImdldENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJtYXBUaWxlcktleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19NQVBUSUxFUl9LRVkiLCJsZW5ndGgiLCJNYXB0aWxlckxheWVyIiwiaW5pdGlhbExhbmd1YWdlIiwibGF5ZXIiLCJhcGlLZXkiLCJhZGRUbyIsInRpbGVVcmwiLCJ0aWxlTGF5ZXIiLCJhdHRyaWJ1dGlvbiIsIm1heFpvb20iLCJtaW5ab29tIiwiUmVzZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIm9uQWRkIiwiZGl2IiwiRG9tVXRpbCIsImNyZWF0ZSIsImlubmVySFRNTCIsIm9uY2xpY2siLCJvcHRpb25zIiwicG9zaXRpb24iLCJyZXNldENvbnRyb2wiLCJlcnJvciIsImFib3J0IiwidXBkYXRlVGlsZXMiLCJyZW1vdmVMYXllciIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInRhcmdldExhbmd1YWdlIiwiRXJyb3IiLCJuYW1lIiwidGltZXIiLCJjbGVhclRpbWVvdXQiLCJ1cGRhdGVNYXJrZXJzIiwiZm9yRWFjaCIsIm1hcmtlciIsInJlbW92ZUZyb20iLCJuZXdNYXJrZXJzIiwiYnVzaW5lc3MiLCJtYXJrZXJDb2xvciIsImdldEJ1c2luZXNzTWFya2VyQ29sb3IiLCJ0eXBlIiwiY3VzdG9tSWNvbiIsImRpdkljb24iLCJjbGFzc05hbWUiLCJodG1sIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwibGF0IiwibG5nIiwiaWNvbiIsInRpdGxlIiwiaXNSdGwiLCJ0cmFuc2xhdGlvbnMiLCJlbiIsImJ1c2luZXNzVHlwZSIsImFkZHJlc3MiLCJwaG9uZSIsImVtYWlsIiwiY2F0ZWdvcnkiLCJzdGF0dXMiLCJ2ZXJpZmllZCIsInBlbmRpbmciLCJyYXRpbmciLCJyZXZpZXdzIiwiZXN0YWJsaXNoZWQiLCJlbXBsb3llZXMiLCJ3b3JraW5nSG91cnMiLCJ3ZWJzaXRlIiwiZGVzY3JpcHRpb24iLCJhciIsInQiLCJidXNpbmVzc0RhdGEiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJ0b0ZpeGVkIiwidG9vbHRpcENvbnRlbnQiLCJiaW5kVG9vbHRpcCIsImRpcmVjdGlvbiIsIm9mZnNldCIsIm9wYWNpdHkiLCJwZXJtYW5lbnQiLCJzdGlja3kiLCJpbnRlcmFjdGl2ZSIsImlzVG9vbHRpcE9wZW4iLCJjbG9zZVRpbWVvdXQiLCJpc0hvdmVyaW5nVG9vbHRpcCIsImlzSG92ZXJpbmdNYXJrZXIiLCJvbiIsImUiLCJ0b29sdGlwIiwidG9vbHRpcEVsZW1lbnQiLCJnZXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlVG9vbHRpcCIsIm9wZW5Ub29sdGlwIiwicHVzaCIsImdyb3VwIiwiZmVhdHVyZUdyb3VwIiwiZml0Qm91bmRzIiwiZ2V0Qm91bmRzIiwicGFkZGluZyIsImNvbG9ycyIsIkVsZWN0cm9uaWNzIiwiQXV0b21vdGl2ZSIsIkFncmljdWx0dXJlIiwiSW5kdXN0cmlhbCIsIkNvbnN0cnVjdGlvbiIsIkZhc2hpb24iLCJNZWRpY2FsIiwiRm9vZCIsIlRlY2hub2xvZ3kiLCJNYXJpbmUiLCJNaW5pbmciLCJUb3VyaXNtIiwiVGV4dGlsZXMiLCJFcXVpcG1lbnQiLCJNaWxpdGFyeSIsIkxvZ2lzdGljcyIsIlBvcnQiLCJGaXNoaW5nIiwiUGVyZnVtZXMiLCJQZXRyb2NoZW1pY2FsIiwiaSIsInAiLCJyZWYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/InteractiveMap.tsx\n"));

/***/ })

});